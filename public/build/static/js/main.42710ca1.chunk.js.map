{"version":3,"sources":["constants/color.ts","components/Disabled.tsx","constants/state.ts","types/app.ts","types/shape.ts","utils/canvas.ts","utils/camera.ts","components/helpers/Svg.tsx","utils/general.ts","utils/shape.tsx","constants/shapes.ts","utils/state.ts","state/state.ts","hooks/useCursorPreview.ts","contexts/preview.tsx","contexts/mouse.tsx","hooks/useMouse.ts","utils/debug.tsx","utils/geometry.ts","hooks/useAnimation.ts","contexts/animation.tsx","components/helpers/AnimationRenderer.tsx","components/Renderer.tsx","hooks/useWheelEffect.ts","hooks/useFreehandEffect.ts","hooks/useEraseEffect.ts","icons/trash.svg","icons/eraser.svg","icons/squiggle.svg","icons/lock.svg","icons/lock-opened.svg","hooks/useActivity.ts","contexts/activity.tsx","components/helpers/Tooltips.jsx","components/Controls.tsx","hooks/useKeyboardShortcuts.ts","components/DebugWindow.tsx","components/helpers/FPS.jsx","components/Editor.tsx","components/ErrorBoundary.tsx","constants/app.ts","App.tsx","reportWebVitals.ts","index.tsx"],"names":["Palette","Black","Blue","Green","Red","Cyan","Yellow","Orange","Purple","Color","Primary","Secondary","Disabled","_jsxs","Container","children","_jsx","Title","Text","target","rel","href","styled","div","_templateObject","_taggedTemplateLiteral","p","_templateObject2","_templateObject3","initialCamera","x","y","z","initialTheme","penColor","penSize","eraserSize","defaultEditorOptions","hideBackgroundPattern","disablePanning","Status","Action","PathItem","ShapeType","statusToString","status","FREEHAND","ERASE","actionToString","action","IDLE","DRAWING_FREEHAND","ERASING","Bounds","getBox","elm","document","querySelector","rect","getBoundingClientRect","minX","left","minY","top","maxX","right","maxY","bottom","width","height","window","innerWidth","innerHeight","screenToCanvasPressured","point","camera","pressure","screenToCanvas","getViewport","box","topLeft","bottomRight","CanvasTarget","updateCamera","updater","nextCamera","nextViewport","Math","min","max","isOverflowingX","isOverflowingY","interactiveRules","_ref","interactive","concat","Path","path","ForeignObject","circle","text","foreignObject","notEmpty","value","undefined","makeShapeId","uuidv4","distanceBetweenPoints","p1","p2","sqrt","getApproximateSizeOfFreeform","shapes","padding","arguments","length","Infinity","shape","points","type","LINE","getPointsFromLine","FREEFORM","getPointsFromFreeform","pointsX","map","pointsY","calculateBoundsFromShapes","xDelta","abs","yDelta","getSvgPathFromStroke","stroke","d","reduce","acc","i","arr","x0","y0","x1","y1","push","join","isValidShape","deleting","line","start","end","roundPoint","round","getPointOnQuadraticLine","c","t","curve","pointToPathSegment","pressuredPointToArray","_ref4","getFreeformSvgPath","size","options","thinning","streamline","smoothing","easing","taper","cap","pointsArr","getStroke","renderShape","id","strokeWidth","strokeLinecap","color","fill","opacity","drawShapes","filter","endEditing","editing","initialAppState","content","selectedIds","hoveredIds","theme","meta","locked","AppState","StateManager","constructor","setStatus","killedEditedShapes","this","state","setState","before","after","setTheme","setMeta","onPan","dx","dy","patchState","panCamera","onPinch","center","dz","zoom","zoomCameraTo","onResetZoom","resetZoom","onResetCamera","onEraseStart","setSnapshot","onEraseMove","_document$getElementB","pointOnCanvas","pointOnSvg","getElementById","createSVGPoint","updatedShapes","pathElement","shouldElementBeDeleted","isPointInStroke","isPointInFill","onEraseEnd","snapshot","onFreehandStart","onFreehandMove","onFreehandEnd","onDeleteAllShapes","url","location","isNewURL","includes","app","useAppState","selector","useStore","initialState","position","CursorPreviewContext","createContext","CursorPreviewProvider","useCursorPreview","useState","renderPenPreviewAt","removePreview","useMemo","withRequestAnimationFrame","Provider","MouseContext","MouseProvider","useMouse","setPosition","useEffect","handleMouseMovePerf","event","clientX","clientY","addEventListener","passive","removeEventListener","screenPosition","canvasPosition","Fragment","cx","cy","r","renderLineShape","renderFreeformShape","drawShapesInDebugMode","stringOfPoint","toFixed","ANIMATION_TIME","isAnimating","useAnimation","ts","useRef","reset","current","clearTimeout","animateAt","useCallback","setTimeout","animateAtOnce","AnimationContext","AnimationProvider","EASING_FUNCTION","AnimationRenderer","useContext","AnimationContainer","AnimatedDotCenter","AnimatedDotSliding","rotation","fadingFrames","keyframes","AnimatedDot","_ref2","css","_ref3","_templateObject4","_templateObject5","getSlidingFrames","distance","_templateObject6","Renderer","debug","svgStyle","svgRef","disable","handleWheel","preventDefault","ctrlKey","deltaY","deltaX","svgElement","useWheelEffect","useFreehandEffect","pointerRef","finalPositionRef","mousePosition","handleMouseDownPerf","handleMouseUpPerf","useEraseEffect","transform","ref","style","SVGBackground","scale","pointerEvents","className","offset","multiplier","getSizeAndOffsetFromScale","_path","_path2","_path3","_path4","_path5","_extends","Object","assign","bind","source","key","prototype","hasOwnProperty","call","apply","SvgTrash","title","titleId","props","viewBox","xmlns","strokeLinejoin","ForwardRef","SvgEraser","SvgSquiggle","SvgLock","SvgLockOpened","ActivityContext","ActivityProvider","useActivity","active","setActive","handleMouseEnter","handleMouseLeave","Tooltip","React","Component","super","getTooltipElement","onMouseEnter","tooltipOffsetX","tooltipOffsetY","targetWidth","targetHeight","createTextNode","message","tooltipElement","createElement","setAttribute","appendChild","positionStyle","scrollY","dark","timeout","tooltipSpeed","removeTooltip","parentNode","removeChild","random","replace","render","onMouseLeave","onMouseDown","defaultProps","withTooltip","WrappedComponent","tooltip","mouseEvents","Controls","showStyles","setShowStyles","isLocked","isDrawing","hidden","RightContainer","hide","SidePanel","StyleSummary","onClick","s","Group","SummaryStroke","TogglablePanel","Section","Label","Options","values","ColorOption","selected","StrokeSize","Button","LeftContainer","DrawingOption","ErasingOption","LockOption","UnlockOption","DeleteOption","ready","setReady","AdjustableSidePanel","HidableContainer","_templateObject7","SquiggleSvg","_templateObject8","EraserSvg","_templateObject9","TrashSvg","_templateObject10","LockSvg","_templateObject11","LockOpenedSvg","_templateObject12","_templateObject13","_templateObject14","span","_templateObject15","_templateObject16","_templateObject17","_templateObject18","_templateObject19","_templateObject20","_templateObject21","DebugWindow","onReset","onUndo","onRedo","viewport","styleSheets","insertRule","deleteRule","display","margin","marginBottom","floor","FPSStats","currentTime","Date","now","frames","startTime","prevTime","fps","shouldComponentUpdate","nextProps","nextState","componentDidMount","onRequestAnimationFrame","calcFPS","afRequest","requestAnimationFrame","componentWillUnmount","cancelAnimationFrame","lastFps","slice","wrapperStyle","zIndex","GRAPH_WIDTH","backgroundColor","fontSize","lineHeight","fontFamily","fontWeight","MozBoxSizing","boxSizing","graphStyle","GRAPH_HEIGHT","barStyle","maxFps","Editor","showFPS","containerStyle","useHotkeys","undo","redo","ErrorBoundary","hasError","error","componentDidCatch","errorInfo","_this$state$error","isMobile","test","navigator","userAgent","Notion","background","minHeight","borderRadius","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","Router","Switch","Route","exact","App"],"mappings":"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","file":"static/js/main.42710ca1.chunk.js","sourcesContent":["export const CurveTool = {\n  Primary: \"#cf00ff\",\n  Secondary: \"#ffffff\",\n};\n\nexport const SelectionBox = {\n  Primary: \"#27A2F8\",\n  Secondary: \"#ffffff\",\n};\n\nexport const HoverState = {\n  Primary: \"#27A2F8\",\n  Secondary: \"#ffffff\",\n  Empty: \"none\",\n};\n\nexport const Shape = {\n  Primary: \"#10293c\",\n  Secondary: \"none\",\n};\n\nexport const Debug = {\n  Primary: \"#EE3F46\",\n  Secondary: \"#ffffff\",\n};\n\nexport const Burst = {\n  Primary: \"#27A2F8\",\n};\n\nexport const PenPreview = {\n  Primary: \"#27A2F8\",\n  Secondary: \"#FFFFFF\",\n};\n\nexport const Palette = {\n  Black: \"#10293c\",\n  Blue: \"#339af0\",\n  Green: \"#37b24d\",\n  Red: \"#f03e3e\",\n  Cyan: \"#3bc9db\",\n  Yellow: \"#fcc419\",\n  Orange: \"#fd7e14\",\n  Purple: \"#845ef7\",\n};\n\nexport const Color = {\n  Palette,\n  Shape,\n  CurveTool,\n  SelectionBox,\n  HoverState,\n  Debug,\n  Burst,\n  PenPreview,\n};\n\nexport function withOpacity(color: string) {\n  return `${color}05`;\n}\n","import { FC } from \"react\";\nimport styled from \"@emotion/styled\";\nimport { Palette } from \"../constants/color\";\n\nexport const Disabled: FC = () => {\n  return (\n    <Container>\n      <Title>Something went wrong.</Title>\n      <Text>\n        This board doesn't work on mobile devices.\n        <br />\n        To learn more please visit{\" \"}\n        <a\n          target=\"_blank\"\n          rel=\"noreferrer\"\n          href=\"https://github.com/nickzuber/notion-draw#faq\"\n        >\n          the FAQ\n        </a>\n        .\n      </Text>\n    </Container>\n  );\n};\n\nconst Container = styled.div`\n  position: relative;\n  height: 100vh;\n  width: 100%;\n  margin: 0;\n  background: #ffffff;\n  box-sizing: border-box;\n  box-shadow: rgba(99, 99, 99, 0.2) 0px 2px 8px 0px;\n  border-radius: 0;\n  overflow: hidden;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n`;\n\nconst Text = styled.p`\n  font-size: 13px;\n  font-weight: 500;\n  line-height: 17px;\n  color: ${Palette.Black};\n  margin: 4px auto 8px;\n  text-align: center;\n`;\n\nconst Title = styled(Text)`\n  font-size: 18px;\n  line-height: 19px;\n  margin: 8px auto 12px;\n`;\n","import { Content, Meta, Theme } from \"../types/app\";\nimport { Camera } from \"../types/canvas\";\nimport { Palette } from \"./color\";\n\nexport const initialCamera: Camera = {\n  x: -1150,\n  y: -650,\n  z: 1,\n};\n\nexport const initialContent: Content = {\n  shapes: [],\n  selectedIds: [],\n  hoveredIds: [],\n};\n\nexport const initialTheme: Theme = {\n  penColor: Palette.Black,\n  penSize: 4,\n  eraserSize: 8,\n};\n\nexport const initialMeta: Meta = {\n  locked: false,\n};\n","import { Camera } from \"./canvas\";\nimport { Shape, ShapeId } from \"./shape\";\n\nexport type EditorOptions = {\n  hideBackgroundPattern: boolean;\n  disablePanning: boolean;\n};\n\nexport const defaultEditorOptions = {\n  hideBackgroundPattern: false,\n  disablePanning: false,\n};\n\nexport type Selectable = {\n  selected?: boolean;\n};\n\nexport enum Status {\n  FREEHAND = \"freehand\",\n  ERASE = \"erase\",\n}\n\nexport enum Action {\n  IDLE,\n  DRAWING_FREEHAND,\n  ERASING,\n}\n\nexport type Content = {\n  shapes: Shape[];\n  selectedIds: ShapeId[];\n  hoveredIds: ShapeId[];\n};\n\nexport type Theme = {\n  penColor: string;\n  penSize: number;\n  eraserSize: number;\n};\n\nexport type Meta = {\n  locked: boolean;\n};\n\nexport type App = {\n  status: Status;\n  action: Action;\n  camera: Camera;\n  content: Content;\n  theme: Theme;\n  meta: Meta;\n};\n\nexport type StateSelector<T, U> = (state: T) => U;\n\nexport function statusToString(status: Status) {\n  switch (status) {\n    case Status.FREEHAND:\n      return \"Freehand\";\n    case Status.ERASE:\n      return \"Erase\";\n  }\n}\n\nexport function actionToString(action: Action) {\n  switch (action) {\n    case Action.IDLE:\n      return \"Idle\";\n    case Action.DRAWING_FREEHAND:\n      return \"Drawing Freehand\";\n    case Action.ERASING:\n      return \"Erasing\";\n  }\n}\n","import { Point, PressuredPoint } from \"./canvas\";\n\nexport enum PathItem {\n  CURVE_START_HANDLE = \"curve-start-handle\",\n  CURVE_END_HANDLE = \"curve-end-handle\",\n  CURVE_HANDLE = \"curve-handle\",\n  SELECTION_BOX = \"selection-box\",\n}\n\nexport type ShapeId = string;\n\nexport enum ShapeType {\n  LINE = \"line\",\n  FREEFORM = \"freeform\",\n}\n\nexport type Shape = {\n  id: ShapeId;\n  type: ShapeType;\n  editing: boolean;\n  deleting?: boolean;\n  color?: string;\n  size?: number;\n};\n\nexport interface Line extends Shape {\n  type: ShapeType.LINE;\n  start: Point;\n  end: Point;\n  curve: Point | null;\n}\n\nexport interface Freeform extends Shape {\n  type: ShapeType.FREEFORM;\n  points: PressuredPoint[];\n}\n","import { Box, Camera, Point, PressuredPoint, Viewport } from \"../types/canvas\";\nimport { PathItem } from \"../types/shape\";\n\nexport const Bounds = {\n  minX: 0,\n  minY: 0,\n  maxX: 3600,\n  maxY: 1800,\n  minZ: 0.1,\n  maxZ: 5,\n};\n\nexport function getBox(): Box {\n  const elm = document.querySelector(\"#canvas\");\n  if (elm) {\n    const rect = elm.getBoundingClientRect();\n    return {\n      minX: rect.left - rect.x,\n      minY: rect.top - rect.y,\n      maxX: rect.right - rect.x,\n      maxY: rect.bottom - rect.y,\n      left: rect.left,\n      top: rect.top,\n      width: rect.width,\n      height: rect.height,\n    };\n  } else {\n    return {\n      minX: 0,\n      minY: 0,\n      maxX: window.innerWidth,\n      maxY: window.innerHeight,\n      left: 0,\n      top: 0,\n      width: window.innerWidth,\n      height: window.innerHeight,\n    };\n  }\n}\n\nexport function screenToCanvasPressured(\n  point: PressuredPoint,\n  camera: Camera,\n): PressuredPoint {\n  return {\n    x: point.x / camera.z - camera.x,\n    y: point.y / camera.z - camera.y,\n    pressure: point.pressure,\n  };\n}\n\nexport function canvasToScreenPressured(\n  point: PressuredPoint,\n  camera: Camera,\n): PressuredPoint {\n  return {\n    x: (point.x - camera.x) * camera.z,\n    y: (point.y - camera.y) * camera.z,\n    pressure: point.pressure,\n  };\n}\n\nexport function screenToCanvas(point: Point, camera: Camera): Point {\n  return {\n    x: point.x / camera.z - camera.x,\n    y: point.y / camera.z - camera.y,\n  };\n}\n\nexport function canvasToScreen(point: Point, camera: Camera): Point {\n  return {\n    x: (point.x - camera.x) * camera.z,\n    y: (point.y - camera.y) * camera.z,\n  };\n}\n\nexport function getViewport(camera: Camera, box: Box): Viewport {\n  const topLeft = screenToCanvas({ x: box.minX, y: box.minY }, camera);\n  const bottomRight = screenToCanvas({ x: box.maxX, y: box.maxY }, camera);\n\n  return {\n    minX: topLeft.x,\n    minY: topLeft.y,\n    maxX: bottomRight.x,\n    maxY: bottomRight.y,\n    height: bottomRight.y - topLeft.y,\n    width: bottomRight.x - topLeft.x,\n  };\n}\n\nexport function getIdFromEventTarget(target: EventTarget | null) {\n  const t = target as HTMLElement;\n  return t.id;\n}\n\nexport function isValidSelectionTarget(target: HTMLElement | null, allowSelectionBox = false) {\n  const isShapeElement = target?.tagName === \"path\" && target?.id;\n  const isSelectionBoxElement = target?.tagName === \"rect\" && target?.id === \"selection-box\";\n  return allowSelectionBox ? isShapeElement || isSelectionBoxElement : isShapeElement;\n}\n\nexport function isEventTargetShape(target: HTMLElement | null) {\n  const isShapeElement = target?.tagName === \"path\" && target?.id;\n  return isShapeElement;\n}\n\nexport function isEventTargetSelectionBox(target: HTMLElement | null) {\n  const isSelectionBoxElement =\n    target?.tagName === \"rect\" && target?.id === PathItem.SELECTION_BOX;\n  return isSelectionBoxElement;\n}\n\nexport function isEventTargetCurveHandle(target: HTMLElement | null) {\n  const isSelectionBoxElement =\n    target?.tagName === \"rect\" && target?.id === PathItem.CURVE_HANDLE;\n  return isSelectionBoxElement;\n}\n\nexport function isEventTargetOnCanvas(target: HTMLElement | null) {\n  return target instanceof SVGElement;\n}\n\nexport enum CanvasTarget {\n  SHAPE = \"shape\",\n  SELECTION_BOX = \"selection-box\",\n  CURVE_HANDLE = \"curve-handle\",\n  SVG_ELEMENT = \"svg-element\",\n  OTHER = \"other\",\n}\n\nexport function getCanvasTargetFromEvent(event: MouseEvent): CanvasTarget {\n  const t = event.target as HTMLElement | null;\n  if (isEventTargetShape(t)) return CanvasTarget.SHAPE;\n  if (isEventTargetSelectionBox(t)) return CanvasTarget.SELECTION_BOX;\n  if (isEventTargetCurveHandle(t)) return CanvasTarget.CURVE_HANDLE;\n  if (isEventTargetOnCanvas(t)) return CanvasTarget.SVG_ELEMENT;\n  return CanvasTarget.OTHER;\n}\n","import { Bounds, getBox, getViewport, screenToCanvas } from \"./canvas\";\nimport { Camera, Point } from \"../types/canvas\";\n\nexport type ZoomRequest = {\n  center: Point;\n  dz: number;\n};\n\nexport function panCamera(camera: Camera, dx: number, dy: number): Camera {\n  return {\n    x: camera.x - dx / camera.z,\n    y: camera.y - dy / camera.z,\n    z: camera.z,\n  };\n}\n\nexport function zoomCameraTo(camera: Camera, point: Point, dz: number): Camera {\n  const zoom = Math.min(Math.max(camera.z - dz * camera.z, Bounds.minZ), Bounds.maxZ);\n\n  const p1 = screenToCanvas(point, camera);\n  const p2 = screenToCanvas(point, { ...camera, z: zoom });\n\n  return {\n    x: camera.x + (p2.x - p1.x),\n    y: camera.y + (p2.y - p1.y),\n    z: zoom,\n  };\n}\n\nexport function resetZoom(camera: Camera): Camera {\n  const { width, height } = getBox();\n  const center = { x: width / 2, y: height / 2 };\n\n  const p1 = screenToCanvas(center, camera);\n  const p2 = screenToCanvas(center, { ...camera, z: 1 });\n\n  return {\n    x: camera.x + (p2.x - p1.x),\n    y: camera.y + (p2.y - p1.y),\n    z: 1,\n  };\n}\n\nexport function requestZoomIn(camera: Camera): ZoomRequest {\n  const i = Math.round(camera.z * 100) / 25;\n  const nextZoom = (i + 1) * 0.25;\n\n  const { width, height } = getBox();\n  const center = { x: width / 2, y: height / 2 };\n  return { center, dz: camera.z - nextZoom };\n}\n\nexport function requestZoomOut(camera: Camera): ZoomRequest {\n  const i = Math.round(camera.z * 100) / 25;\n  const nextZoom = (i - 1) * 0.25;\n\n  const { width, height } = getBox();\n  const center = { x: width / 2, y: height / 2 };\n  return { center, dz: camera.z - nextZoom };\n}\n\nexport function updateCamera(camera: Camera, updater: (camera: Camera) => Camera): Camera {\n  const nextCamera = updater(camera);\n  const nextViewport = getViewport(nextCamera, getBox());\n\n  let x = Math.min(nextCamera.x, Bounds.minX);\n  let y = Math.min(nextCamera.y, Bounds.minY);\n  let z = Math.max(nextCamera.z, Bounds.minZ);\n\n  const isOverflowingX = x - nextViewport.width < -Bounds.maxX;\n  const isOverflowingY = y - nextViewport.height < -Bounds.maxY;\n\n  if (isOverflowingX) {\n    x = nextViewport.width - Bounds.maxX;\n  }\n\n  if (isOverflowingY) {\n    y = nextViewport.height - Bounds.maxY;\n  }\n\n  if (nextCamera.x >= Bounds.minX && isOverflowingX) {\n    x = Bounds.minX;\n    z = camera.z;\n  }\n  if (nextCamera.y >= Bounds.minY && isOverflowingY) {\n    y = Bounds.minY;\n    z = camera.z;\n  }\n\n  return {\n    x,\n    y,\n    z,\n  };\n}\n","import styled from \"@emotion/styled\";\n\ntype Interactable = {\n  interactive?: boolean;\n};\n\nfunction interactiveRules({ interactive = true }): string {\n  return `\n    pointer-events: ${interactive ? \"painted\" : \"none\"};\n    user-select: ${interactive ? \"painted\" : \"none\"};\n  `;\n}\n\nexport const Path = styled.path<Interactable>(interactiveRules);\nexport const Rect = styled.rect<Interactable>(interactiveRules);\nexport const Circle = styled.circle<Interactable>(interactiveRules);\nexport const Text = styled.text<Interactable>(interactiveRules);\nexport const ForeignObject =\n  styled.foreignObject<Interactable>(interactiveRules);\n","export function notEmpty<T>(value: T | null | undefined): value is T {\n  return value !== null && value !== undefined;\n}\n\nexport function compare<T>(target: T, ...items: T[]) {\n  return items.some((item) => item === target);\n}\n\nexport function setCursor(style: string | null) {\n  const bodyElement = document.querySelector(\"body\");\n  if (bodyElement) {\n    bodyElement.style.cursor = style || \"inherit\";\n  }\n}\n","import { v4 as uuidv4 } from \"uuid\";\nimport { getStroke } from \"perfect-freehand\";\nimport { Path } from \"../components/helpers/Svg\";\nimport { Color } from \"../constants/color\";\nimport {\n  FREEFORM_STROKE_WIDTH,\n  LINE_STROKE_WIDTH,\n  MAX_VALID_LINE_LENGTH,\n} from \"../constants/shapes\";\nimport { Point, PressuredPoint } from \"../types/canvas\";\nimport { Line, Freeform, Shape, ShapeType } from \"../types/shape\";\nimport { notEmpty } from \"./general\";\n\nexport function makeShapeId() {\n  return `shape-${uuidv4()}`;\n}\n\nexport function moveLineBy(line: Line, dx: number, dy: number) {\n  return {\n    ...line,\n    start: movePoint(line.start, dx, dy),\n    end: movePoint(line.end, dx, dy),\n    curve: line.curve ? movePoint(line.curve, dx, dy) : null,\n  };\n}\n\nexport function moveFreeformBy(path: Freeform, dx: number, dy: number) {\n  return {\n    ...path,\n    points: path.points.map((point) => movePressuredPoint(point, dx, dy)),\n  };\n}\n\nexport function moveShapeBy(shape: Shape, dx: number, dy: number) {\n  switch (shape.type) {\n    case ShapeType.LINE:\n      return moveLineBy(shape as Line, dx, dy);\n    case ShapeType.FREEFORM:\n      return moveFreeformBy(shape as Freeform, dx, dy);\n    default:\n      return shape;\n  }\n}\n\nexport function point(x: number, y: number): Point {\n  return {\n    x,\n    y,\n  };\n}\n\nexport function line(p1: Point, p2: Point, p3?: Point): Line {\n  return {\n    id: makeShapeId(),\n    type: ShapeType.LINE,\n    editing: false,\n    start: p1,\n    end: p2,\n    curve: p3 || getMidpointOfStraightLine(p1, p2),\n  };\n}\n\nexport function distanceBetweenPoints(p1: Point, p2: Point) {\n  return Math.sqrt((p1.x - p2.x) ** 2 + (p1.y - p2.y) ** 2);\n}\n\nexport function getApproximateSizeOfFreeform(path: Freeform) {\n  const { minX, minY, maxX, maxY } = calculateBoundsFromShapes([path]);\n  const xDelta = Math.abs(minX - maxX);\n  const yDelta = Math.abs(minY - maxY);\n  return Math.max(xDelta, yDelta);\n}\n\nexport function getLengthOfLine(line: Line) {\n  return distanceBetweenPoints(line.start, line.end);\n}\n\nexport function getSvgPathFromStroke(stroke: number[][]) {\n  if (!stroke.length) return \"\";\n\n  const d = stroke.reduce(\n    (acc, [x0, y0], i, arr) => {\n      const [x1, y1] = arr[(i + 1) % arr.length];\n      acc.push(x0, y0, (x0 + x1) / 2, (y0 + y1) / 2);\n      return acc;\n    },\n    [\"M\", ...stroke[0], \"Q\"],\n  );\n\n  d.push(\"Z\");\n  return d.join(\" \");\n}\n\nexport function isValidShape(shape: Shape) {\n  if (shape.deleting) return false;\n\n  switch (shape.type) {\n    case ShapeType.LINE:\n      const line = shape as Line;\n      return distanceBetweenPoints(line.start, line.end) > MAX_VALID_LINE_LENGTH;\n    case ShapeType.FREEFORM:\n      const path = shape as Freeform;\n      // If the user simply clicks on the screen, let's not\n      // consider this to be a valid shape.\n      return getApproximateSizeOfFreeform(path) > 0;\n    default:\n      return true;\n  }\n}\n\nexport function roundPoint(p: Point): Point {\n  return {\n    x: Math.round(p.x),\n    y: Math.round(p.y),\n  };\n}\n\nexport function movePressuredPoint(p: PressuredPoint, dx: number, dy: number): PressuredPoint {\n  return {\n    x: p.x + dx,\n    y: p.y + dy,\n    pressure: p.pressure,\n  };\n}\n\nexport function movePoint(p: Point, dx: number, dy: number): Point {\n  return {\n    x: p.x + dx,\n    y: p.y + dy,\n  };\n}\n\nexport function movePointX(p: Point, dx: number): Point {\n  return {\n    x: p.x + dx,\n    y: p.y,\n  };\n}\n\nexport function movePointY(p: Point, dy: number): Point {\n  return {\n    y: p.y + dy,\n    x: p.x,\n  };\n}\n\nexport function getMidpointOfStraightLine(p1: Point, p2: Point): Point {\n  return {\n    x: (p2.x + p1.x) / 2,\n    y: (p2.y + p1.y) / 2,\n  };\n}\n\nexport function getPointOnQuadraticLine(p1: Point, p2: Point, c: Point, t = 0.5): Point {\n  return {\n    x: (1 - t) ** 2 * p1.x + 2 * (1 - t) * t * c.x + t ** 2 * p2.x,\n    y: (1 - t) ** 2 * p1.y + 2 * (1 - t) * t * c.y + t ** 2 * p2.y,\n  };\n}\n\nexport function getMidpointOfLine(line: Line) {\n  return line.curve\n    ? getPointOnQuadraticLine(line.start, line.end, line.curve)\n    : getMidpointOfStraightLine(line.start, line.end);\n}\n\nexport function getPointsFromLine(line: Line) {\n  return line.curve\n    ? [\n        line.start,\n        getPointOnQuadraticLine(line.start, line.end, line.curve, 0.1),\n        getPointOnQuadraticLine(line.start, line.end, line.curve, 0.2),\n        getPointOnQuadraticLine(line.start, line.end, line.curve, 0.3),\n        getPointOnQuadraticLine(line.start, line.end, line.curve, 0.4),\n        getPointOnQuadraticLine(line.start, line.end, line.curve, 0.5),\n        getPointOnQuadraticLine(line.start, line.end, line.curve, 0.6),\n        getPointOnQuadraticLine(line.start, line.end, line.curve, 0.7),\n        getPointOnQuadraticLine(line.start, line.end, line.curve, 0.8),\n        getPointOnQuadraticLine(line.start, line.end, line.curve, 0.9),\n        line.end,\n      ]\n    : [line.start, line.end];\n}\n\nexport function getPointsFromFreeform(path: Freeform) {\n  return path.points;\n}\n\nexport function getDistanceFromPointToLine(\n  { x, y }: Point,\n  [{ x: x1, y: y1 }, { x: x2, y: y2 }]: Point[],\n): number {\n  const A = x - x1;\n  const B = y - y1;\n  const C = x2 - x1;\n  const D = y2 - y1;\n\n  const dot = A * C + B * D;\n  const len_sq = C * C + D * D;\n  let param = -1;\n\n  // Edge case for length line of zero.\n  if (len_sq !== 0) {\n    param = dot / len_sq;\n  }\n\n  let xx, yy;\n\n  if (param < 0) {\n    xx = x1;\n    yy = y1;\n  } else if (param > 1) {\n    xx = x2;\n    yy = y2;\n  } else {\n    xx = x1 + param * C;\n    yy = y1 + param * D;\n  }\n\n  const dx = x - xx;\n  const dy = y - yy;\n  return Math.sqrt(dx * dx + dy * dy);\n}\n\nexport function pointToPathSegment(point: Point) {\n  return `${point.x} ${point.y}`;\n}\n\nexport function renderLineShape(line: Line) {\n  return line.curve ? (\n    <Path\n      key={line.id}\n      id={line.id}\n      strokeWidth={line.size || LINE_STROKE_WIDTH}\n      strokeLinecap=\"round\"\n      stroke={line.color || Color.Shape.Primary}\n      fill={Color.Shape.Secondary}\n      d={`\n        M ${pointToPathSegment(line.start)}\n        Q ${pointToPathSegment(line.curve)} ${pointToPathSegment(line.end)}\n    `}\n    />\n  ) : (\n    <Path\n      key={line.id}\n      id={line.id}\n      strokeWidth={line.size || LINE_STROKE_WIDTH}\n      strokeLinecap=\"round\"\n      stroke={line.color || Color.Shape.Primary}\n      fill={Color.Shape.Secondary}\n      d={`\n        M ${pointToPathSegment(line.start)}\n        L ${pointToPathSegment(line.end)}\n    `}\n    />\n  );\n}\n\nfunction pressuredPointToArray(points: PressuredPoint[]): number[][] {\n  return points.map(({ x, y, pressure }) => [x, y, pressure]);\n}\n\nexport function getFreeformSvgPath(path: Freeform, size = FREEFORM_STROKE_WIDTH) {\n  const options = {\n    size,\n    thinning: -0.55,\n    streamline: 0.5,\n    smoothing: 0.45,\n    easing: (t: number) => t,\n    start: {\n      taper: 0,\n      easing: (t: number) => t,\n      cap: true,\n    },\n    end: {\n      taper: 0,\n      easing: (t: number) => t,\n      cap: true,\n    },\n  };\n\n  const pointsArr = pressuredPointToArray(path.points);\n  const stroke = getStroke(pointsArr, options);\n\n  return getSvgPathFromStroke(stroke);\n}\n\nexport function renderFreeformShape(path: Freeform) {\n  return (\n    <Path\n      key={path.id}\n      id={path.id}\n      stroke=\"none\"\n      strokeLinecap=\"round\"\n      fill={path.color || Color.Shape.Primary}\n      opacity={path.deleting ? 0.5 : 1}\n      d={`\n        ${getFreeformSvgPath(path, path.size)}\n      `}\n    />\n  );\n}\n\nexport function renderShape(shape: Shape) {\n  switch (shape.type) {\n    case ShapeType.LINE:\n      return renderLineShape(shape as Line);\n    case ShapeType.FREEFORM:\n      return renderFreeformShape(shape as Freeform);\n    default:\n      return null;\n  }\n}\n\nexport function drawShapes(shapes: Shape[]) {\n  return shapes.map(renderShape).filter(notEmpty);\n}\n\nfunction calculateBoundsFromShapes(shapes: Shape[], padding = 0) {\n  let minX = Infinity;\n  let minY = Infinity;\n  let maxX = -Infinity;\n  let maxY = -Infinity;\n\n  // @TODO support freeform path\n  for (const shape of shapes) {\n    let points = [];\n    switch (shape.type) {\n      case ShapeType.LINE:\n        points = getPointsFromLine(shape as Line);\n        break;\n      case ShapeType.FREEFORM:\n        points = getPointsFromFreeform(shape as Freeform);\n        break;\n    }\n\n    const pointsX = points.map((point) => point.x);\n    const pointsY = points.map((point) => point.y);\n\n    minX = Math.min(minX, ...pointsX, Infinity);\n    minY = Math.min(minY, ...pointsY, Infinity);\n    maxX = Math.max(maxX, ...pointsX, -Infinity);\n    maxY = Math.max(maxY, ...pointsY, -Infinity);\n  }\n\n  minX = minX - padding;\n  minY = minY - padding;\n  maxX = maxX + padding;\n  maxY = maxY + padding;\n\n  return {\n    minX,\n    minY,\n    maxX,\n    maxY,\n  };\n}\n","export const LINE_STROKE_WIDTH = 4;\nexport const FREEFORM_STROKE_WIDTH = 2;\n\nexport const MAX_VALID_LINE_LENGTH = 4;\nexport const MAX_VALID_FREEFORM_SIZE = 3;\n\nexport const SELECTION_BOX_PADDING = 5;\n","import { Shape } from \"../types/shape\";\n\nexport function endEditing(shape: Shape) {\n  return {\n    ...shape,\n    editing: false,\n  };\n}\n\nexport function beginEditing(shape: Shape) {\n  return {\n    ...shape,\n    editing: true,\n  };\n}\n","import { StateManager } from \"rko\";\nimport { initialCamera, initialContent, initialMeta, initialTheme } from \"../constants/state\";\nimport { Action, App, Meta, StateSelector, Status, Theme } from \"../types/app\";\nimport { Point, PressuredPoint, Zoom } from \"../types/canvas\";\nimport { Freeform, ShapeType } from \"../types/shape\";\nimport { panCamera, resetZoom, updateCamera, zoomCameraTo } from \"../utils/camera\";\nimport { screenToCanvasPressured } from \"../utils/canvas\";\nimport { isValidShape, makeShapeId } from \"../utils/shape\";\nimport { endEditing } from \"../utils/state\";\n\nexport const initialAppState: App = {\n  status: Status.FREEHAND,\n  action: Action.IDLE,\n  camera: initialCamera,\n  content: initialContent,\n  theme: initialTheme,\n  meta: initialMeta,\n};\n\nexport type SetStatus = (status: Status) => void;\nexport type Pan = (dx: number, dy: number) => void;\nexport type Pinch = (center: Point, dz: Zoom) => void;\nexport type SetTheme = (theme: Partial<Theme>) => void;\nexport type SetMeta = (meta: Partial<Meta>) => void;\nexport type ResetZoom = () => void;\nexport type ResetCamera = () => void;\nexport type DeleteAllShapes = () => void;\nexport type FreehandStart = (point: PressuredPoint) => void;\nexport type FreehandMove = (point: PressuredPoint) => void;\nexport type FreehandEnd = () => void;\nexport type EraseStart = (point: PressuredPoint) => void;\nexport type EraseMove = (point: PressuredPoint) => void;\nexport type EraseEnd = () => void;\n\nexport class AppState extends StateManager<App> {\n  setStatus: SetStatus = (status) => {\n    const validShapes = this.state.content.shapes.filter(isValidShape);\n    const killedEditedShapes = validShapes.filter((shape) => !shape.editing);\n    this.setState({\n      before: {\n        status: this.state.status,\n        content: this.state.content,\n      },\n      after: {\n        status,\n        content: {\n          ...this.state.content,\n          shapes: killedEditedShapes,\n        },\n      },\n    });\n  };\n\n  setTheme: SetTheme = (theme) => {\n    this.setState({\n      before: {\n        theme: this.state.theme,\n      },\n      after: {\n        theme,\n      },\n    });\n  };\n\n  setMeta: SetMeta = (meta) => {\n    this.setState({\n      before: {\n        meta: this.state.meta,\n      },\n      after: {\n        meta,\n      },\n    });\n  };\n\n  onPan: Pan = (dx, dy) => {\n    this.patchState({\n      camera: updateCamera(this.state.camera, (camera) => panCamera(camera, dx, dy)),\n    });\n  };\n\n  onPinch: Pinch = (center, dz) => {\n    this.patchState({\n      camera: updateCamera(this.state.camera, (camera) => zoomCameraTo(camera, center, dz)),\n    });\n  };\n\n  onResetZoom: ResetZoom = () => {\n    this.setState({\n      before: {\n        camera: this.state.camera,\n      },\n      after: {\n        camera: updateCamera(this.state.camera, (camera) => resetZoom(camera)),\n      },\n    });\n  };\n\n  onResetCamera: ResetCamera = () => {\n    this.setState({\n      before: {\n        camera: this.state.camera,\n      },\n      after: {\n        camera: updateCamera(this.state.camera, () => initialCamera),\n      },\n    });\n  };\n\n  onEraseStart: EraseStart = (point) => {\n    this.setSnapshot();\n    this.onEraseMove(point);\n  };\n\n  onEraseMove: EraseMove = (point) => {\n    const pointOnCanvas = screenToCanvasPressured(point, this.state.camera);\n\n    // @HACK\n    // The web standards for this are wonky ATM - Chrome and FF seem to differ on the\n    // type of point which `isPointInStroke` should accept. Chrome forces `SVGPoint` which\n    // is already deprecated.\n    const pointOnSvg = (document.getElementById(\"render-scene-svg\") as any)?.createSVGPoint();\n    pointOnSvg.x = pointOnCanvas.x;\n    pointOnSvg.y = pointOnCanvas.y;\n\n    const updatedShapes = this.state.content.shapes.map((shape) => {\n      if (!shape.deleting && shape.type === ShapeType.FREEFORM) {\n        const path = shape as Freeform;\n        const pathElement = document.getElementById(path.id) as SVGGeometryElement | null;\n        const shouldElementBeDeleted =\n          pathElement?.isPointInStroke(pointOnSvg) || pathElement?.isPointInFill(pointOnSvg);\n        return {\n          ...path,\n          deleting: shouldElementBeDeleted,\n        };\n      }\n      return shape;\n    });\n    this.patchState({\n      action: Action.ERASING,\n      content: {\n        ...this.state.content,\n        shapes: updatedShapes,\n      },\n    });\n  };\n\n  onEraseEnd: EraseEnd = () => {\n    const validShapes = this.state.content.shapes.filter(isValidShape);\n    const updatedShapes = validShapes.map(endEditing);\n\n    this.setState({\n      before: {\n        action: this.snapshot.action,\n        status: this.snapshot.status,\n        content: this.snapshot.content,\n      },\n      after: {\n        action: Action.IDLE,\n        status: Status.ERASE,\n        content: {\n          ...this.state.content,\n          selectedIds: [],\n          shapes: updatedShapes,\n        },\n      },\n    });\n  };\n\n  onFreehandStart: FreehandStart = (point) => {\n    this.setSnapshot();\n    const pointOnCanvas = screenToCanvasPressured(point, this.state.camera);\n    const id = makeShapeId();\n    const shape = {\n      id,\n      type: ShapeType.FREEFORM,\n      editing: true,\n      points: [pointOnCanvas],\n      color: this.state.theme.penColor,\n      size: this.state.theme.penSize,\n    } as Freeform;\n\n    this.patchState({\n      action: Action.DRAWING_FREEHAND,\n      content: {\n        ...this.state.content,\n        selectedIds: [shape.id],\n        shapes: [...this.state.content.shapes, shape],\n      },\n    });\n  };\n\n  onFreehandMove: FreehandMove = (point) => {\n    const pointOnCanvas = screenToCanvasPressured(point, this.state.camera);\n    const updatedShapes = this.state.content.shapes.map((shape) => {\n      if (shape.editing && shape.type === ShapeType.FREEFORM) {\n        const path = shape as Freeform;\n        return {\n          ...path,\n          points: path.points.concat(pointOnCanvas),\n        };\n      }\n      return shape;\n    });\n    this.patchState({\n      action: Action.DRAWING_FREEHAND,\n      content: {\n        ...this.state.content,\n        shapes: updatedShapes,\n      },\n    });\n  };\n\n  onFreehandEnd: FreehandEnd = () => {\n    const validShapes = this.state.content.shapes.filter(isValidShape);\n    const updatedShapes = validShapes.map(endEditing);\n\n    this.setState({\n      before: {\n        action: this.snapshot.action,\n        status: this.snapshot.status,\n        content: this.snapshot.content,\n      },\n      after: {\n        action: Action.IDLE,\n        status: Status.FREEHAND,\n        content: {\n          ...this.state.content,\n          selectedIds: [],\n          shapes: updatedShapes,\n        },\n      },\n    });\n  };\n\n  onDeleteAllShapes: DeleteAllShapes = () => {\n    this.setState({\n      before: {\n        ...this.state,\n      },\n      after: {\n        ...this.state,\n        content: {\n          ...this.state.content,\n          selectedIds: [],\n          shapes: [],\n        },\n      },\n    });\n  };\n}\n\nconst url = window.location.href;\nconst isNewURL = url.includes(\"notion-draw.art\");\n\n// Avoid upgrades on older drawings.\nconst version = isNewURL ? 2 : 1;\n\nexport const app = new AppState(initialAppState, url, version);\n\nexport const useAppState = (selector?: StateSelector<App, any>) => {\n  if (selector) {\n    return app.useStore(selector);\n  }\n  return app.useStore();\n};\n","import { useMemo, useState } from \"react\";\nimport withRequestAnimationFrame from \"raf-schd\";\nimport { Point } from \"../types/canvas\";\n\nexport const ANIMATION_TIME = 1 * 1000;\n\nexport type CursorPreviewAPI = {\n  renderPenPreviewAt: (point: Point) => void;\n  removePreview: () => void;\n  position: Point | null;\n};\n\ntype State = {\n  position: Point | null;\n};\n\nconst initialState = {\n  position: null,\n};\n\nexport const useCursorPreview = (): CursorPreviewAPI => {\n  const [state, setState] = useState<State>(initialState);\n\n  const renderPenPreviewAt = (position: Point) => {\n    setState({\n      position,\n    });\n  };\n\n  const removePreview = () => {\n    setState({\n      position: null,\n    });\n  };\n\n  const renderPenPreviewAtPerf = useMemo(\n    () => withRequestAnimationFrame(renderPenPreviewAt),\n    [],\n  );\n  const removePreviewPerf = useMemo(() => withRequestAnimationFrame(removePreview), []);\n\n  return {\n    renderPenPreviewAt: renderPenPreviewAtPerf,\n    removePreview: removePreviewPerf,\n    position: state.position,\n  };\n};\n","import React, { FC, createContext } from \"react\";\nimport { CursorPreviewAPI, useCursorPreview } from \"../hooks/useCursorPreview\";\n\nexport const CursorPreviewContext = createContext<CursorPreviewAPI | null>(\n  null,\n) as React.Context<CursorPreviewAPI>;\n\nexport const CursorPreviewProvider: FC<{}> = ({ children }) => {\n  const state = useCursorPreview();\n\n  return (\n    <CursorPreviewContext.Provider value={state}>\n      {children}\n    </CursorPreviewContext.Provider>\n  );\n};\n","import React, { FC, createContext } from \"react\";\nimport { MouseAPI, useMouse } from \"../hooks/useMouse\";\n\nexport const MouseContext = createContext<MouseAPI | null>(\n  null,\n) as React.Context<MouseAPI>;\n\nexport const MouseProvider: FC<{}> = ({ children }) => {\n  const state = useMouse();\n\n  return (\n    <MouseContext.Provider value={state}>{children}</MouseContext.Provider>\n  );\n};\n","import { useEffect, useState } from \"react\";\nimport withRequestAnimationFrame from \"raf-schd\";\nimport { getBox, screenToCanvas } from \"../utils/canvas\";\nimport { Point } from \"../types/canvas\";\nimport { point, roundPoint } from \"../utils/shape\";\nimport { useAppState } from \"../state/state\";\n\nexport type MouseAPI = {\n  screenPosition: Point;\n  canvasPosition: Point;\n};\n\nexport const useMouse = (): MouseAPI => {\n  const { camera } = useAppState();\n  const [position, setPosition] = useState<Point>(point(0, 0));\n\n  useEffect(() => {\n    function handleMouseMove(event: MouseEvent) {\n      const { clientX, clientY } = event;\n      const { left, top } = getBox();\n      const position = { x: clientX - left, y: clientY - top };\n\n      setPosition(position);\n    }\n\n    const handleMouseMovePerf = withRequestAnimationFrame(handleMouseMove);\n    document.addEventListener(\"mousemove\", handleMouseMovePerf, {\n      passive: false,\n    });\n\n    return () => {\n      document.removeEventListener(\"mousemove\", handleMouseMovePerf);\n    };\n  }, []);\n\n  return {\n    screenPosition: roundPoint(position),\n    canvasPosition: roundPoint(screenToCanvas(position, camera)),\n  };\n};\n","import { Fragment } from \"react\";\nimport { Color } from \"../constants/color\";\nimport { Freeform, Line, Shape, ShapeType } from \"../types/shape\";\nimport { notEmpty } from \"./general\";\nimport { getPointsFromLine } from \"./shape\";\n\nfunction renderLineShape(line: Line, z: number) {\n  const points = getPointsFromLine(line);\n\n  return (\n    <Fragment>\n      {points.map((p, i) => (\n        <circle key={i} cx={p.x} cy={p.y} r={4 / z} fill={Color.Debug.Primary} />\n      ))}\n    </Fragment>\n  );\n}\n\nfunction renderFreeformShape(path: Freeform, z: number) {\n  return (\n    <Fragment>\n      {path.points.map((p, i) => (\n        <circle key={i} cx={p.x} cy={p.y} r={4 / z} fill={Color.Debug.Primary} />\n      ))}\n    </Fragment>\n  );\n}\n\nfunction renderShape(shape: Shape, z: number) {\n  switch (shape.type) {\n    case ShapeType.LINE:\n      return renderLineShape(shape as Line, z);\n    case ShapeType.FREEFORM:\n      return renderFreeformShape(shape as Freeform, z);\n    default:\n      return null;\n  }\n}\n\nexport function drawShapesInDebugMode(shapes: Shape[], z: number) {\n  return shapes.map((shape) => renderShape(shape, z)).filter(notEmpty);\n}\n","import { Point } from \"../types/canvas\";\nimport { Line } from \"../types/shape\";\nimport { distanceBetweenPoints, line } from \"./shape\";\n\nexport function stringOfPoint(point: Point) {\n  return `${point.x.toFixed(3)},${point.x.toFixed(3)}}`;\n}\n\nexport function arePointsEqual(p1: Point, p2: Point): boolean {\n  return stringOfPoint(p1) === stringOfPoint(p2);\n}\n\nexport function getNearestMultiple(target: number) {\n  return (n: number) => Math.round(n / target) * target;\n}\n\nexport function ensureAngleWithinBounds(angle: number) {\n  return ((angle % 360) + 360) % 360;\n}\n\nexport function getAngleBetweenPoints(p1: Point, p2: Point) {\n  return ensureAngleWithinBounds(\n    180 - (Math.atan2(p1.y - p2.y, p1.x - p2.x) * 180) / Math.PI,\n  );\n}\n\nexport function rotatePoint(pivot: Point, point: Point, angle: number): Point {\n  const radians = (Math.PI / 180) * angle;\n  const cos = Math.cos(radians);\n  const sin = Math.sin(radians);\n  const nx = cos * (point.x - pivot.x) + sin * (point.y - pivot.y) + pivot.x;\n  const ny = cos * (point.y - pivot.y) - sin * (point.x - pivot.x) + pivot.y;\n  return {\n    x: nx,\n    y: ny,\n  };\n}\n\nexport function rotateLine(pivot: Point, line: Line, angle: number): Line {\n  return {\n    ...line,\n    start: rotatePoint(pivot, line.start, angle),\n    end: rotatePoint(pivot, line.end, angle),\n    curve: line.curve ? rotatePoint(pivot, line.curve, angle) : line.curve,\n  };\n}\n\nexport function getNearestPointFromLines(\n  point: Point,\n  lines: Line[],\n  delta = 7,\n) {\n  let snappedPoint: Point | null = null;\n  for (const line of lines) {\n    if (\n      distanceBetweenPoints(point, line.start) <= delta &&\n      distanceBetweenPoints(point, line.start) > 0\n    ) {\n      snappedPoint = line.start;\n      break;\n    } else if (\n      distanceBetweenPoints(point, line.end) <= delta &&\n      distanceBetweenPoints(point, line.end) > 0\n    ) {\n      snappedPoint = line.end;\n      break;\n    }\n  }\n\n  return snappedPoint;\n}\n\nexport function getIntersectionBetweenTwoLineSegments(\n  l1: Line,\n  l2: Line,\n): Point | null {\n  // Check if none of the lines are of length 0\n  if (\n    (l1.start.x === l1.end.x && l1.start.y === l1.end.y) ||\n    (l2.start.x === l2.end.x && l2.start.y === l2.end.y)\n  ) {\n    return null;\n  }\n\n  const denominator =\n    (l2.end.y - l2.start.y) * (l1.end.x - l1.start.x) -\n    (l2.end.x - l2.start.x) * (l1.end.y - l1.start.y);\n\n  // Lines are parallel\n  if (denominator === 0) {\n    return null;\n  }\n\n  const ua =\n    ((l2.end.x - l2.start.x) * (l1.start.y - l2.start.y) -\n      (l2.end.y - l2.start.y) * (l1.start.x - l2.start.x)) /\n    denominator;\n  const ub =\n    ((l1.end.x - l1.start.x) * (l1.start.y - l2.start.y) -\n      (l1.end.y - l1.start.y) * (l1.start.x - l2.start.x)) /\n    denominator;\n\n  // Is the intersection along the segments\n  if (ua < 0 || ua > 1 || ub < 0 || ub > 1) {\n    return null;\n  }\n\n  // Return a object with the x and y coordinates of the intersection\n  const x = l1.start.x + ua * (l1.end.x - l1.start.x);\n  const y = l1.start.y + ua * (l1.end.y - l1.start.y);\n\n  return {\n    x,\n    y,\n  };\n}\n\nexport function getIntersectionBetweenTwoLines(\n  l1: Line,\n  l2: Line,\n): Point | null {\n  const denominator =\n    (l2.end.y - l2.start.y) * (l1.end.x - l1.start.x) -\n    (l2.end.x - l2.start.x) * (l1.end.y - l1.start.y);\n\n  if (denominator === 0) {\n    return null;\n  }\n\n  let a = l1.start.y - l2.start.y;\n  let b = l1.start.x - l2.start.x;\n  let numerator1 = (l2.end.x - l2.start.x) * a - (l2.end.y - l2.start.y) * b;\n  let numerator2 = (l1.end.x - l1.start.x) * a - (l1.end.y - l1.start.y) * b;\n  a = numerator1 / denominator;\n  b = numerator2 / denominator;\n\n  // if we cast these lines infinitely in both directions, they intersect here:\n  const x = l1.start.x + a * (l1.end.x - l1.start.x);\n  const y = l1.start.y + a * (l1.end.y - l1.start.y);\n\n  return {\n    x,\n    y,\n  };\n}\n\nexport function getAutoCurvePointFromTwoLines(\n  target: Line,\n  startConnection: Line,\n  endConnection: Line,\n): Point | null {\n  // Trivial curve is where the two lines form a simple joint.\n  const trivialCurve = getIntersectionBetweenTwoLines(\n    line(startConnection.curve as Point, target.start),\n    line(endConnection.curve as Point, target.end),\n  );\n\n  return trivialCurve;\n}\n\nexport function findConnectedLines(\n  point: Point,\n  lines: Line[],\n  equalityThreshold = 1,\n): Line[] {\n  const connections = [];\n  for (const line of lines) {\n    if (\n      distanceBetweenPoints(line.start, point) < equalityThreshold ||\n      distanceBetweenPoints(line.end, point) < equalityThreshold\n    ) {\n      connections.push(line);\n    }\n  }\n\n  return connections;\n}\n","import { useCallback, useEffect, useRef, useState } from \"react\";\nimport { Point } from \"../types/canvas\";\nimport { stringOfPoint } from \"../utils/geometry\";\n\nexport const ANIMATION_TIME = 1 * 1000;\n\nexport type AnimationAPI = {\n  animateAt: (point: Point) => void;\n  animateAtOnce: (point: Point) => void;\n  position: Point | null;\n  isAnimating: boolean;\n};\n\ntype State = {\n  position: Point | null;\n  isAnimating: boolean;\n};\n\nconst initialState = {\n  position: null,\n  isAnimating: false,\n};\n\nexport const useAnimation = (): AnimationAPI => {\n  const [state, setState] = useState<State>(initialState);\n  const ts = useRef<NodeJS.Timeout>();\n\n  function reset() {\n    if (ts.current) {\n      clearTimeout(ts.current);\n    }\n  }\n\n  useEffect(() => {\n    return () => reset();\n  }, []);\n\n  const animateAt = useCallback((position: Point) => {\n    reset();\n\n    setState({\n      position,\n      isAnimating: true,\n    });\n\n    ts.current = setTimeout(() => {\n      setState({\n        position: null,\n        isAnimating: false,\n      });\n    }, ANIMATION_TIME);\n  }, []);\n\n  const animateAtOnce = useCallback(\n    (position: Point) => {\n      // If not animation, we're good to go.\n      if (!state.isAnimating) {\n        animateAt(position);\n      }\n\n      // If we are animating, only override if its a new animation.\n      else if (state.position && !comparePoints(state.position, position)) {\n        animateAt(position);\n      }\n    },\n    [state.isAnimating, state.position, animateAt],\n  );\n\n  return {\n    animateAt,\n    animateAtOnce,\n    position: state.position,\n    isAnimating: state.isAnimating,\n  };\n};\n\nfunction comparePoints(p1: Point, p2: Point) {\n  return stringOfPoint(p1) === stringOfPoint(p2);\n}\n","import React, { FC, createContext } from \"react\";\nimport { AnimationAPI, useAnimation } from \"../hooks/useAnimation\";\n\nexport const AnimationContext = createContext<AnimationAPI | null>(\n  null,\n) as React.Context<AnimationAPI>;\n\nexport const AnimationProvider: FC<{}> = ({ children }) => {\n  const state = useAnimation();\n\n  return (\n    <AnimationContext.Provider value={state}>\n      {children}\n    </AnimationContext.Provider>\n  );\n};\n","import { FC, useContext } from \"react\";\nimport styled from \"@emotion/styled\";\nimport { keyframes, css } from \"@emotion/react\";\nimport { AnimationContext } from \"../../contexts/animation\";\nimport { ForeignObject } from \"./Svg\";\nimport { ANIMATION_TIME } from \"../../hooks/useAnimation\";\nimport { stringOfPoint } from \"../../utils/geometry\";\nimport { Color } from \"../../constants/color\";\n\nconst EASING_FUNCTION = \"cubic-bezier(0.065, 0.835, 0.595, 0.895)\";\nconst SLIDE_DISTANCE = 10;\n\ntype AnimationRendererProps = {\n  size?: number;\n};\n\nexport const AnimationRenderer: FC<AnimationRendererProps> = ({\n  size = 40,\n}) => {\n  const { position } = useContext(AnimationContext);\n\n  if (!position) {\n    return null;\n  }\n\n  return (\n    <ForeignObject\n      key={stringOfPoint(position)}\n      interactive={false}\n      x={position.x - size / 2}\n      y={position.y - size / 2}\n      height={size}\n      width={size}\n    >\n      <AnimationContainer>\n        <AnimatedDotCenter size={size} />\n        <AnimatedDotSliding size={size} rotation={45} />\n        <AnimatedDotSliding size={size} rotation={45 * 3} />\n        <AnimatedDotSliding size={size} rotation={45 * 5} />\n        <AnimatedDotSliding size={size} rotation={45 * 7} />\n      </AnimationContainer>\n    </ForeignObject>\n  );\n};\n\ntype Sized = {\n  size: number;\n};\n\ntype Rotated = {\n  rotation: number;\n};\n\nconst fadingFrames = keyframes`\n  0% {\n    opacity: 1;\n  }\n\n  50% {\n    opacity: 0;\n  }\n\n  100% {\n    opacity: 0;\n  }\n`;\n\nconst getSlidingFrames = (rotation: number, distance: number) => keyframes`\n  0% {\n    transform: rotate(${rotation}deg) translate(0);\n    opacity: 1;\n  }\n\n  50% {\n    transform: rotate(${rotation}deg) translate(${distance}px);\n    opacity: 0;\n  }\n\n  100% {\n    transform: rotate(${rotation}deg) translate(${distance}px);\n    opacity: 0;\n  }\n`;\n\nconst AnimatedDot = styled.div<Sized>(({ size }) => {\n  const height = 2;\n  const width = 5;\n\n  return css`\n    position: absolute;\n    top: ${size / 2 - height / 2}px;\n    left: ${size / 2 - width / 2}px;\n    pointer-events: none;\n    user-select: none;\n    background: ${Color.Burst.Primary};\n    border-radius: 1px;\n    height: ${height}px;\n    width: ${width}px;\n  `;\n});\n\nconst AnimatedDotCenter = styled(AnimatedDot)(({ size }) => {\n  const d = 2;\n\n  return css`\n    border-radius: 100%;\n    top: ${size / 2 - d / 2}px;\n    left: ${size / 2 - d / 2}px;\n    height: ${d}px;\n    width: ${d}px;\n    animation: ${fadingFrames} ${ANIMATION_TIME * 1.1}ms ${EASING_FUNCTION};\n  `;\n});\n\nconst AnimatedDotSliding = styled(AnimatedDot)<Rotated>`\n  animation: ${(p) => getSlidingFrames(p.rotation, SLIDE_DISTANCE)}\n    ${ANIMATION_TIME * 1.1}ms ${EASING_FUNCTION};\n`;\n\nconst AnimationContainer = styled.div`\n  pointer-events: none;\n  user-select: none;\n  background: none;\n  height: 100%;\n  width: 100%;\n`;\n","import styled from \"@emotion/styled\";\nimport { FC, useRef } from \"react\";\nimport { useEraseEffect } from \"../hooks/useEraseEffect\";\nimport { useFreehandEffect } from \"../hooks/useFreehandEffect\";\nimport { useWheelEffect } from \"../hooks/useWheelEffect\";\nimport {\n  FreehandStart,\n  FreehandMove,\n  FreehandEnd,\n  Pan,\n  Pinch,\n  EraseStart,\n  EraseMove,\n  EraseEnd,\n} from \"../state/state\";\nimport { Action, Content, EditorOptions, Meta, Status, Theme } from \"../types/app\";\nimport { Camera } from \"../types/canvas\";\nimport { Bounds } from \"../utils/canvas\";\nimport { drawShapesInDebugMode } from \"../utils/debug\";\nimport { drawShapes } from \"../utils/shape\";\nimport { AnimationRenderer } from \"./helpers/AnimationRenderer\";\nimport { ForeignObject } from \"./helpers/Svg\";\n\ntype RendererProps = {\n  action: Action;\n  status: Status;\n  meta: Meta;\n  camera: Camera;\n  content: Content;\n  theme: Theme;\n  onPan: Pan;\n  onPinch: Pinch;\n  onFreehandStart: FreehandStart;\n  onFreehandMove: FreehandMove;\n  onFreehandEnd: FreehandEnd;\n  onEraseStart: EraseStart;\n  onEraseMove: EraseMove;\n  onEraseEnd: EraseEnd;\n  debug?: boolean;\n  options: EditorOptions;\n  svgStyle?: React.CSSProperties;\n};\n\nexport const Renderer: FC<RendererProps> = ({\n  camera,\n  action,\n  meta,\n  status,\n  content,\n  onPan,\n  onPinch,\n  onFreehandStart,\n  onFreehandMove,\n  onFreehandEnd,\n  onEraseStart,\n  onEraseMove,\n  onEraseEnd,\n  debug,\n  options,\n  svgStyle = {},\n}) => {\n  const svgRef = useRef<SVGSVGElement>(null);\n\n  const { shapes } = content;\n\n  // Panning\n  useWheelEffect(svgRef, onPinch, onPan, options.disablePanning || meta.locked);\n\n  // Controls\n  useFreehandEffect(\n    svgRef,\n    status,\n    onFreehandStart,\n    onFreehandMove,\n    onFreehandEnd,\n    meta.locked,\n  );\n  useEraseEffect(svgRef, status, onEraseStart, onEraseMove, onEraseEnd, meta.locked);\n\n  // Rendering variables.\n  const transform = `scale(${camera.z}) translate(${camera.x}px, ${camera.y}px)`;\n\n  return (\n    <svg id=\"render-scene-svg\" ref={svgRef} style={svgStyle}>\n      {/* Actual content group */}\n      <g style={{ transform }}>\n        {/* Background Pattern */}\n        {!options.hideBackgroundPattern && (\n          <ForeignObject\n            interactive={false}\n            x={0}\n            y={0}\n            height={Bounds.maxY}\n            width={Bounds.maxX}\n          >\n            <SVGBackground scale={camera.z} />\n          </ForeignObject>\n        )}\n\n        {drawShapes(shapes)}\n\n        <AnimationRenderer />\n      </g>\n\n      {/* Debugging group */}\n      {debug && (\n        <g style={{ transform, pointerEvents: \"none\" }}>\n          <polyline className=\"debug-lines\" points=\"2,1798, 3600,2\" />\n          <polyline className=\"debug-lines\" points=\"2,2, 3600,1798\" />\n          {drawShapesInDebugMode(shapes, camera.z)}\n        </g>\n      )}\n    </svg>\n  );\n};\n\n// =============================================================================\n\nfunction getSizeAndOffsetFromScale(scale: number): [number, number] {\n  const size = 10;\n  const offset = 0.75;\n\n  let multiplier = 1;\n\n  if (scale < 0.75) {\n    multiplier = 1.5;\n  }\n\n  if (scale < 0.5) {\n    multiplier = 2.5;\n  }\n\n  return [size * multiplier, offset * multiplier];\n}\n\ntype Scalable = {\n  scale: number;\n};\n\nconst SVGBackground = styled.div<Scalable>(({ scale }) => {\n  const [size, offset] = getSizeAndOffsetFromScale(scale);\n\n  return `\n  height: 100%;\n  width: 100%;\n  background-color: #ffffff;\n  background-image: radial-gradient(#d7d7d7 ${offset}px, #ffffff ${offset}px);\n  background-size: ${size}px ${size}px;\n  pointer-events: none;\n  user-select: none;\n`;\n});\n","import { useEffect } from \"react\";\nimport { Pan, Pinch } from \"../state/state\";\nimport { getBox } from \"../utils/canvas\";\n\nexport const useWheelEffect = (\n  svgRef: React.RefObject<SVGSVGElement>,\n  onPinch: Pinch,\n  onPan: Pan,\n  disable = false,\n) => {\n  useEffect(() => {\n    if (disable) return;\n\n    function handleWheel(event: WheelEvent) {\n      event.preventDefault();\n\n      // Should be zooming when holding Ctrl.\n      if (event.ctrlKey) {\n        const { clientX, clientY, deltaY } = event;\n        const { left, top } = getBox();\n        const center = { x: clientX - left, y: clientY - top };\n        const dz = deltaY / 100;\n        onPinch(center, dz);\n      } else {\n        const { deltaX, deltaY } = event;\n        onPan(deltaX, deltaY);\n      }\n    }\n\n    const svgElement = svgRef.current;\n    if (!svgElement) return;\n    svgElement.addEventListener(\"wheel\", handleWheel, { passive: false });\n    return () => {\n      svgElement.removeEventListener(\"wheel\", handleWheel);\n    };\n  }, [svgRef, onPan, onPinch, disable]);\n\n  return null;\n};\n","import { useContext, useEffect, useRef } from \"react\";\nimport withRequestAnimationFrame from \"raf-schd\";\nimport { FreehandStart, FreehandMove, FreehandEnd } from \"../state/state\";\nimport { Status } from \"../types/app\";\nimport { getBox } from \"../utils/canvas\";\nimport { Point, PressuredPoint } from \"../types/canvas\";\nimport { CursorPreviewContext } from \"../contexts/preview\";\nimport { MouseContext } from \"../contexts/mouse\";\n\nexport const useFreehandEffect = (\n  svgRef: React.RefObject<SVGSVGElement>,\n  status: Status,\n  onFreehandStart: FreehandStart,\n  onFreehandMove: FreehandMove,\n  onFreehandEnd: FreehandEnd,\n  locked: boolean,\n) => {\n  const pointerRef = useRef<PressuredPoint | null>(null);\n  const finalPositionRef = useRef<Point | null>(null);\n  const { canvasPosition: mousePosition } = useContext(MouseContext);\n  const { renderPenPreviewAt } = useContext(CursorPreviewContext);\n\n  // Handles showing the pen circle preview.\n  useEffect(() => {\n    if (status === Status.FREEHAND) {\n      renderPenPreviewAt(finalPositionRef.current || mousePosition);\n    }\n  }, [status, mousePosition, renderPenPreviewAt]);\n\n  // Handles drawing the pen lines.\n  useEffect(() => {\n    if (locked) return;\n    if (status !== Status.FREEHAND) return;\n\n    function handleMouseDown(event: PointerEvent) {\n      event.preventDefault();\n      const { clientX, clientY } = event;\n      const { left, top } = getBox();\n      pointerRef.current = { x: clientX - left, y: clientY - top, pressure: event.pressure };\n\n      onFreehandStart(pointerRef.current);\n    }\n\n    function handleMouseMove(event: PointerEvent) {\n      if (!pointerRef.current) return;\n\n      const { clientX, clientY } = event;\n      const { left, top } = getBox();\n      pointerRef.current = { x: clientX - left, y: clientY - top, pressure: event.pressure };\n\n      onFreehandMove(pointerRef.current);\n    }\n\n    function handleMouseUp() {\n      if (!pointerRef.current) return;\n      onFreehandEnd();\n      pointerRef.current = null;\n    }\n\n    const svgElement = svgRef.current;\n    if (!svgElement) return;\n\n    const handleMouseDownPerf = withRequestAnimationFrame(handleMouseDown);\n    const handleMouseMovePerf = withRequestAnimationFrame(handleMouseMove);\n    const handleMouseUpPerf = withRequestAnimationFrame(handleMouseUp);\n\n    svgElement.addEventListener(\"pointerdown\", handleMouseDownPerf, {\n      passive: false,\n    });\n    document.addEventListener(\"pointermove\", handleMouseMovePerf, {\n      passive: false,\n    });\n    document.addEventListener(\"pointerup\", handleMouseUpPerf, {\n      passive: false,\n    });\n\n    return () => {\n      svgElement.removeEventListener(\"pointerdown\", handleMouseDownPerf);\n      document.removeEventListener(\"pointermove\", handleMouseMovePerf);\n      document.removeEventListener(\"pointerup\", handleMouseUpPerf);\n    };\n  }, [svgRef, status, onFreehandStart, onFreehandMove, onFreehandEnd, locked]);\n\n  return null;\n};\n","import { useContext, useEffect, useRef } from \"react\";\nimport withRequestAnimationFrame from \"raf-schd\";\nimport { EraseStart, EraseMove, EraseEnd } from \"../state/state\";\nimport { Status } from \"../types/app\";\nimport { getBox } from \"../utils/canvas\";\nimport { Point, PressuredPoint } from \"../types/canvas\";\nimport { CursorPreviewContext } from \"../contexts/preview\";\nimport { MouseContext } from \"../contexts/mouse\";\n\nexport const useEraseEffect = (\n  svgRef: React.RefObject<SVGSVGElement>,\n  status: Status,\n  onEraseStart: EraseStart,\n  onEraseMove: EraseMove,\n  onEraseEnd: EraseEnd,\n  locked: boolean,\n) => {\n  const pointerRef = useRef<PressuredPoint | null>(null);\n  const finalPositionRef = useRef<Point | null>(null);\n  const { canvasPosition: mousePosition } = useContext(MouseContext);\n  const { renderPenPreviewAt } = useContext(CursorPreviewContext);\n\n  // Handles showing the pen circle preview.\n  useEffect(() => {\n    if (status === Status.ERASE) {\n      renderPenPreviewAt(finalPositionRef.current || mousePosition);\n    }\n  }, [status, mousePosition, renderPenPreviewAt]);\n\n  // Handles drawing the pen lines.\n  useEffect(() => {\n    if (locked) return;\n    if (status !== Status.ERASE) return;\n\n    function handleMouseDown(event: PointerEvent) {\n      event.preventDefault();\n      const { clientX, clientY } = event;\n      const { left, top } = getBox();\n      pointerRef.current = { x: clientX - left, y: clientY - top, pressure: event.pressure };\n\n      onEraseStart(pointerRef.current);\n    }\n\n    function handleMouseMove(event: PointerEvent) {\n      if (!pointerRef.current) return;\n\n      const { clientX, clientY } = event;\n      const { left, top } = getBox();\n      pointerRef.current = { x: clientX - left, y: clientY - top, pressure: event.pressure };\n\n      onEraseMove(pointerRef.current);\n    }\n\n    function handleMouseUp() {\n      if (!pointerRef.current) return;\n      onEraseEnd();\n      pointerRef.current = null;\n    }\n\n    const svgElement = svgRef.current;\n    if (!svgElement) return;\n\n    const handleMouseDownPerf = withRequestAnimationFrame(handleMouseDown);\n    const handleMouseMovePerf = withRequestAnimationFrame(handleMouseMove);\n    const handleMouseUpPerf = withRequestAnimationFrame(handleMouseUp);\n\n    svgElement.addEventListener(\"pointerdown\", handleMouseDownPerf, {\n      passive: false,\n    });\n    document.addEventListener(\"pointermove\", handleMouseMovePerf, {\n      passive: false,\n    });\n    document.addEventListener(\"pointerup\", handleMouseUpPerf, {\n      passive: false,\n    });\n\n    return () => {\n      svgElement.removeEventListener(\"pointerdown\", handleMouseDownPerf);\n      document.removeEventListener(\"pointermove\", handleMouseMovePerf);\n      document.removeEventListener(\"pointerup\", handleMouseUpPerf);\n    };\n  }, [svgRef, status, onEraseStart, onEraseMove, onEraseEnd, locked]);\n\n  return null;\n};\n","var _path, _path2, _path3, _path4, _path5;\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport * as React from \"react\";\nfunction SvgTrash(_ref, svgRef) {\n  let {\n    title,\n    titleId,\n    ...props\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M5.75 7.75L6.59115 17.4233C6.68102 18.4568 7.54622 19.25 8.58363 19.25H14.4164C15.4538 19.25 16.319 18.4568 16.4088 17.4233L17.25 7.75H5.75Z\",\n    stroke: \"currentColor\",\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M9.75 10.75V16.25\",\n    stroke: \"currentColor\",\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  })), _path3 || (_path3 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M13.25 10.75V16.25\",\n    stroke: \"currentColor\",\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  })), _path4 || (_path4 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M8.75 7.75V6.75C8.75 5.64543 9.64543 4.75 10.75 4.75H12.25C13.3546 4.75 14.25 5.64543 14.25 6.75V7.75\",\n    stroke: \"currentColor\",\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  })), _path5 || (_path5 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M4.75 7.75H18.25\",\n    stroke: \"currentColor\",\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  })));\n}\nconst ForwardRef = /*#__PURE__*/React.forwardRef(SvgTrash);\nexport default __webpack_public_path__ + \"static/media/trash.75c947d6.svg\";\nexport { ForwardRef as ReactComponent };","var _path, _path2;\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport * as React from \"react\";\nfunction SvgEraser(_ref, svgRef) {\n  let {\n    title,\n    titleId,\n    ...props\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M7 15.25L4.75 13L11.2929 6.45711C11.6834 6.06658 12.3166 6.06658 12.7071 6.45711L15.5429 9.29289C15.9334 9.68342 15.9334 10.3166 15.5429 10.7071L11 15.25H7Z\",\n    stroke: \"currentColor\",\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M12.75 19.25H19.25\",\n    stroke: \"currentColor\",\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  })));\n}\nconst ForwardRef = /*#__PURE__*/React.forwardRef(SvgEraser);\nexport default __webpack_public_path__ + \"static/media/eraser.3d0e8325.svg\";\nexport { ForwardRef as ReactComponent };","var _path, _path2, _path3, _path4;\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport * as React from \"react\";\nfunction SvgSquiggle(_ref, svgRef) {\n  let {\n    title,\n    titleId,\n    ...props\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M12.7888 8.7361L16.1972 5.32785C16.9167 4.60838 18.0539 4.57914 18.7374 5.26256C19.4208 5.94598 19.3915 7.08325 18.6721 7.80273L15.2374 11.2374\",\n    stroke: \"currentColor\",\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M15.6665 11.6665L12.3335 8.33347C11.5847 7.58468 10.382 7.54934 9.59053 8.25287L8.75 9L15 15.25L15.7471 14.4095C16.4507 13.618 16.4153 12.4153 15.6665 11.6665Z\",\n    stroke: \"currentColor\",\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  })), _path3 || (_path3 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M9 10L4.75 12.75L11.25 19.25L14 15\",\n    stroke: \"currentColor\",\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  })), _path4 || (_path4 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M7 15L8.25 13.75\",\n    stroke: \"currentColor\",\n    strokeWidth: 1.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  })));\n}\nconst ForwardRef = /*#__PURE__*/React.forwardRef(SvgSquiggle);\nexport default __webpack_public_path__ + \"static/media/squiggle.74714f23.svg\";\nexport { ForwardRef as ReactComponent };","var _path, _path2;\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport * as React from \"react\";\nfunction SvgLock(_ref, svgRef) {\n  let {\n    title,\n    titleId,\n    ...props\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    stroke: \"currentColor\",\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    strokeWidth: 1.5,\n    d: \"M5.75 11.75C5.75 11.1977 6.19772 10.75 6.75 10.75H17.25C17.8023 10.75 18.25 11.1977 18.25 11.75V17.25C18.25 18.3546 17.3546 19.25 16.25 19.25H7.75C6.64543 19.25 5.75 18.3546 5.75 17.25V11.75Z\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    stroke: \"currentColor\",\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    strokeWidth: 1.5,\n    d: \"M7.75 10.5V10.3427C7.75 8.78147 7.65607 7.04125 8.74646 5.9239C9.36829 5.2867 10.3745 4.75 12 4.75C13.6255 4.75 14.6317 5.2867 15.2535 5.9239C16.3439 7.04125 16.25 8.78147 16.25 10.3427V10.5\"\n  })));\n}\nconst ForwardRef = /*#__PURE__*/React.forwardRef(SvgLock);\nexport default __webpack_public_path__ + \"static/media/lock.b2135bcb.svg\";\nexport { ForwardRef as ReactComponent };","var _path, _path2;\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport * as React from \"react\";\nfunction SvgLockOpened(_ref, svgRef) {\n  let {\n    title,\n    titleId,\n    ...props\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    stroke: \"currentColor\",\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    strokeWidth: 1.5,\n    d: \"M5.75 11.75C5.75 11.1977 6.19772 10.75 6.75 10.75H17.25C17.8023 10.75 18.25 11.1977 18.25 11.75V17.25C18.25 18.3546 17.3546 19.25 16.25 19.25H7.75C6.64543 19.25 5.75 18.3546 5.75 17.25V11.75Z\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    stroke: \"currentColor\",\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    strokeWidth: 1.5,\n    d: \"M7.75 10.5V9.84343C7.75 8.61493 7.70093 7.29883 8.42416 6.30578C8.99862 5.51699 10.0568 4.75 12 4.75C14 4.75 15.25 6.25 15.25 6.25\"\n  })));\n}\nconst ForwardRef = /*#__PURE__*/React.forwardRef(SvgLockOpened);\nexport default __webpack_public_path__ + \"static/media/lock-opened.67385b81.svg\";\nexport { ForwardRef as ReactComponent };","import { useEffect, useState } from \"react\";\n\nconst DelayMS = 1000;\n\nexport const useActivity = (): boolean => {\n  const [active, setActive] = useState(false);\n\n  useEffect(() => {\n    let ts: ReturnType<typeof setTimeout> | null = null;\n\n    function handleMouseEnter() {\n      if (ts) clearTimeout(ts);\n      setActive(true);\n    }\n\n    function handleMouseLeave() {\n      ts = setTimeout(() => setActive(false), DelayMS);\n    }\n\n    document.addEventListener(\"mouseenter\", handleMouseEnter, {\n      passive: false,\n    });\n    document.addEventListener(\"mouseleave\", handleMouseLeave, {\n      passive: false,\n    });\n\n    return () => {\n      document.removeEventListener(\"mouseenter\", handleMouseEnter);\n      document.removeEventListener(\"mouseleave\", handleMouseLeave);\n    };\n  }, []);\n\n  return active;\n};\n","import React, { FC, createContext } from \"react\";\nimport { useActivity } from \"../hooks/useActivity\";\n\nexport const ActivityContext = createContext<boolean | null>(null) as React.Context<boolean>;\n\nexport const ActivityProvider: FC<{}> = ({ children }) => {\n  const state = useActivity();\n\n  return <ActivityContext.Provider value={state}>{children}</ActivityContext.Provider>;\n};\n","import React from \"react\";\n\nclass Tooltip extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.id = (\"tooltip-id-\" + Math.random()).replace(/\\./g, \"\");\n  }\n\n  static defaultProps = {\n    tooltipOffsetX: 0,\n    tooltipOffsetY: 0,\n    tooltipSpeed: 350,\n  };\n\n  getTooltipElement = () => document.querySelector(`#${this.id}`);\n\n  onMouseEnter = (event) => {\n    if (this.getTooltipElement()) {\n      return;\n    }\n\n    const { tooltipOffsetX, tooltipOffsetY } = this.props;\n    const {\n      x,\n      y,\n      width: targetWidth,\n      height: targetHeight,\n    } = event.target.getBoundingClientRect();\n    const text = document.createTextNode(this.props.message);\n    const tooltipElement = document.createElement(\"div\");\n\n    tooltipElement.setAttribute(\"id\", this.id);\n    tooltipElement.setAttribute(\"class\", \"react-tooltip\");\n    tooltipElement.appendChild(text);\n\n    document.querySelector(\"body\").appendChild(tooltipElement);\n\n    const { width } = tooltipElement.getBoundingClientRect();\n    const positionStyle = `\n      top: ${y + targetHeight + window.scrollY + tooltipOffsetY}px;\n      left: ${x - width / 2 + targetWidth / 2 + tooltipOffsetX}px;\n      ${\n        this.props.dark\n          ? `\n        background: #ffffff;\n        color: #10293c;\n      `\n          : \"\"\n      }\n    `;\n\n    tooltipElement.setAttribute(\"style\", positionStyle);\n\n    this.timeout = setTimeout(() => {\n      tooltipElement.setAttribute(\n        \"style\",\n        `\n          ${positionStyle}\n          opacity: ${this.props.dark ? 1 : 0.9};\n        `,\n      );\n    }, this.props.tooltipSpeed);\n  };\n\n  removeTooltip = () => {\n    clearTimeout(this.timeout);\n    const tooltipElement = this.getTooltipElement();\n    if (tooltipElement) {\n      tooltipElement.parentNode.removeChild(tooltipElement);\n    }\n  };\n\n  render() {\n    return this.props.children({\n      onMouseEnter: this.onMouseEnter,\n      onMouseLeave: this.removeTooltip,\n      onMouseDown: this.removeTooltip,\n    });\n  }\n}\n\nexport const withTooltip =\n  (WrappedComponent) =>\n  ({ tooltip, tooltipOffsetX, tooltipOffsetY, tooltipSpeed, ...props }) =>\n    (\n      <Tooltip\n        dark={props.dark}\n        message={tooltip}\n        tooltipOffsetX={tooltipOffsetX}\n        tooltipOffsetY={tooltipOffsetY}\n        tooltipSpeed={tooltipSpeed}\n      >\n        {(mouseEvents) =>\n          tooltip ? (\n            <WrappedComponent {...props} {...mouseEvents} />\n          ) : (\n            <WrappedComponent {...props} />\n          )\n        }\n      </Tooltip>\n    );\n","import { FC, Fragment, useContext, useEffect, useState } from \"react\";\nimport styled from \"@emotion/styled\";\nimport { Action, Meta, Status, Theme } from \"../types/app\";\nimport { ReactComponent as TrashSvg } from \"../icons/trash.svg\";\nimport { ReactComponent as EraserSvg } from \"../icons/eraser.svg\";\nimport { ReactComponent as SquiggleSvg } from \"../icons/squiggle.svg\";\nimport { ReactComponent as LockSvg } from \"../icons/lock.svg\";\nimport { ReactComponent as LockOpenedSvg } from \"../icons/lock-opened.svg\";\nimport { app, SetTheme } from \"../state/state\";\nimport { Camera } from \"../types/canvas\";\nimport { Palette } from \"../constants/color\";\nimport { ActivityContext } from \"../contexts/activity\";\nimport { withTooltip } from \"./helpers/Tooltips\";\n\ntype ControlsProps = {\n  status: Status;\n  camera: Camera;\n  meta: Meta;\n  action: Action;\n  theme: Theme;\n  setTheme: SetTheme;\n};\n\nexport const Controls: FC<ControlsProps> = ({\n  status,\n  camera,\n  meta,\n  action,\n  theme,\n  setTheme,\n}) => {\n  const { setStatus, setMeta, onResetCamera, onDeleteAllShapes } = app;\n  const [showStyles, setShowStyles] = useState(false);\n  const active = useContext(ActivityContext);\n\n  const isLocked = meta.locked;\n  const isDrawing = action === Action.DRAWING_FREEHAND;\n  const hidden = !active || isDrawing;\n\n  useEffect(() => {\n    setShowStyles(false);\n  }, [hidden]);\n\n  return (\n    <Container>\n      <RightContainer hide={hidden}>\n        <SidePanel style={{ width: 145 }} hide={isLocked}>\n          <StyleSummary onClick={() => setShowStyles((s) => !s)}>\n            <Group>\n              <Text>Styles</Text>\n              <SummaryStroke color={theme.penColor} />\n            </Group>\n            <Group>\n              <Text>{Math.round(camera.z * 100)}%</Text>\n            </Group>\n          </StyleSummary>\n        </SidePanel>\n        {showStyles && (\n          <TogglablePanel>\n            <Section>\n              <Label>\n                <Text>Colors</Text>\n              </Label>\n              <Options>\n                {Object.values(Palette).map((color) => (\n                  <ColorOption\n                    key={color}\n                    color={color}\n                    selected={color === theme.penColor}\n                    onClick={() => {\n                      setStatus(Status.FREEHAND);\n                      setTheme({ penColor: color });\n                      setShowStyles(false);\n                    }}\n                  />\n                ))}\n              </Options>\n            </Section>\n\n            <Section>\n              <Label>\n                <Text>Sizes</Text>\n              </Label>\n              <Options>\n                <StrokeSize\n                  size={2}\n                  color={theme.penColor}\n                  selected={theme.penSize === 2}\n                  onClick={() => {\n                    setStatus(Status.FREEHAND);\n                    setTheme({ penSize: 2 });\n                  }}\n                />\n                <StrokeSize\n                  size={4}\n                  color={theme.penColor}\n                  selected={theme.penSize === 4}\n                  onClick={() => {\n                    setStatus(Status.FREEHAND);\n                    setTheme({ penSize: 4 });\n                  }}\n                />\n                <StrokeSize\n                  size={8}\n                  color={theme.penColor}\n                  selected={theme.penSize === 8}\n                  onClick={() => {\n                    setStatus(Status.FREEHAND);\n                    setTheme({ penSize: 8 });\n                  }}\n                />\n              </Options>\n            </Section>\n\n            <Section>\n              <Button onClick={() => onResetCamera()}>Reset zoom & center</Button>\n            </Section>\n          </TogglablePanel>\n        )}\n      </RightContainer>\n\n      <LeftContainer\n        hide={hidden}\n        style={{\n          width: meta.locked ? 46 : 80,\n        }}\n      >\n        <SidePanel hide={isLocked}>\n          <DrawingOption\n            selected={status === Status.FREEHAND}\n            onClick={() => setStatus(Status.FREEHAND)}\n          />\n          <ErasingOption\n            selected={status === Status.ERASE}\n            onClick={() => {\n              setStatus(Status.ERASE);\n              setShowStyles(false);\n            }}\n          />\n        </SidePanel>\n\n        <SidePanel>\n          {meta.locked ? (\n            <LockOption\n              tooltip=\"Unlock this board and re-enable editing\"\n              tooltipOffsetX={94}\n              tooltipOffsetY={-65}\n              tooltipSpeed={200}\n              onClick={() => setMeta({ locked: false })}\n            />\n          ) : (\n            <Fragment>\n              <UnlockOption\n                tooltip=\"Lock this board and disable editing\"\n                tooltipOffsetX={82}\n                tooltipOffsetY={-65}\n                tooltipSpeed={200}\n                onClick={() => setMeta({ locked: true })}\n              />\n              <DeleteOption\n                tooltip=\"Clear everything from the board\"\n                tooltipOffsetX={40}\n                tooltipOffsetY={-65}\n                tooltipSpeed={200}\n                onClick={() => onDeleteAllShapes()}\n              />\n            </Fragment>\n          )}\n        </SidePanel>\n      </LeftContainer>\n    </Container>\n  );\n};\n\nconst TogglablePanel: FC = ({ children }) => {\n  const [ready, setReady] = useState(false);\n\n  useEffect(() => {\n    const ts = setTimeout(() => setReady(true), 10);\n    return () => clearTimeout(ts);\n  }, []);\n\n  return <AdjustableSidePanel hide={!ready}>{children}</AdjustableSidePanel>;\n};\n\nconst Container = styled.div``;\n\nconst HidableContainer = styled.div<{ hide?: boolean }>`\n  transition: opacity 250ms ease, transform 250ms ease;\n  pointer-events: ${(props) => (props.hide ? \"none\" : \"all\")};\n  opacity: ${(props) => (props.hide ? 0 : 1)};\n  transform: scale(${(props) => (props.hide ? 0.975 : 1)});\n\n  cursor: ${(props) => (props.hide ? \"default !important\" : null)};\n\n  * {\n    cursor: ${(props) => (props.hide ? \"default !important\" : null)};\n  }\n`;\n\nconst LeftContainer = styled(HidableContainer)`\n  position: absolute;\n  background: transparent;\n  min-height: 100px;\n  width: 80px;\n  top: 12px;\n  left: 12px;\n  bottom: 12px;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  align-items: flex-start;\n  pointer-events: none;\n  user-select: none;\n`;\n\nconst RightContainer = styled(HidableContainer)`\n  position: absolute;\n  background: transparent;\n  min-height: 100px;\n  width: 215px;\n  top: 32px;\n  right: 12px;\n  bottom: 0;\n\n  display: flex;\n  flex-direction: column;\n  align-items: flex-end;\n  justify-content: flex-start;\n  pointer-events: none;\n  user-select: none;\n`;\n\nconst SidePanel = styled(HidableContainer)`\n  margin: 0 0 8px;\n  background: #fefefe;\n  min-height: 30px;\n  padding: 4px;\n  box-shadow: rgba(0, 0, 0, 0.05) 0px 0px 16px -1px, rgba(0, 0, 0, 0.05) 0px 0px 16px -8px,\n    rgba(0, 0, 0, 0.12) 0px 0px 16px -12px, rgba(0, 0, 0, 0.08) 0px 0px 2px 0px;\n  box-sizing: border-box;\n  border-radius: 6px;\n\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: center;\n  flex-wrap: wrap;\n  width: 100%;\n  pointer-events: all;\n`;\n\nconst AdjustableSidePanel = styled(SidePanel)`\n  padding: 8px 12px 0;\n  justify-content: flex-start;\n\n  @media (max-height: 240px) {\n    width: 350px;\n  }\n`;\n\nconst StyleSummary = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: space-between;\n  padding: 4px 8px;\n  height: 30px;\n  width: 100%;\n  border-radius: 6px;\n  cursor: pointer;\n  transition: all 100ms ease;\n\n  &:hover {\n    background: #eee;\n  }\n\n  &:active {\n    background: #ccc;\n  }\n`;\n\nconst DrawingOption = styled(SquiggleSvg)<{ selected: boolean }>`\n  position: relative;\n  display: inline-block;\n  margin: 2px;\n  padding: 4px;\n  height: 30px;\n  width: 30px;\n  border-radius: 100%;\n  background: ${(props) => (props.selected ? \"#ddd\" : \"transparent\")};\n  cursor: pointer;\n  transition: all 100ms ease;\n\n  &:hover {\n    background: ${(props) => (props.selected ? \"#ddd\" : \"#eee\")};\n  }\n\n  &:active {\n    background: #ccc;\n  }\n`;\n\nconst ErasingOption = styled(EraserSvg)<{ selected: boolean }>`\n  position: relative;\n  display: inline-block;\n  margin: 2px;\n  padding: 4px;\n  height: 30px;\n  width: 30px;\n  border-radius: 100%;\n  background: ${(props) => (props.selected ? \"#ddd\" : \"transparent\")};\n  cursor: pointer;\n  transition: all 100ms ease;\n\n  &:hover {\n    background: ${(props) => (props.selected ? \"#ddd\" : \"#eee\")};\n  }\n\n  &:active {\n    background: #ccc;\n  }\n`;\n\nconst DeleteOption = withTooltip(styled(TrashSvg)`\n  position: relative;\n  display: inline-block;\n  margin: 2px;\n  padding: 6px;\n  height: 30px;\n  width: 30px;\n  border-radius: 100%;\n  background: transparent;\n  cursor: pointer;\n  transition: all 100ms ease;\n\n  &:hover {\n    background: #eee;\n  }\n\n  &:active {\n    background: #ccc;\n  }\n`);\n\nconst LockOption = withTooltip(styled(LockSvg)`\n  position: relative;\n  display: inline-block;\n  margin: 2px;\n  padding: 6px;\n  height: 30px;\n  width: 30px;\n  border-radius: 100%;\n  background: transparent;\n  cursor: pointer;\n  transition: all 100ms ease;\n\n  &:hover {\n    background: #eee;\n  }\n\n  &:active {\n    background: #ccc;\n  }\n\n  path {\n    stroke-width: 2px;\n  }\n`);\n\nconst UnlockOption = withTooltip(styled(LockOpenedSvg)`\n  position: relative;\n  display: inline-block;\n  margin: 2px;\n  padding: 6px;\n  height: 30px;\n  width: 30px;\n  border-radius: 100%;\n  background: transparent;\n  cursor: pointer;\n  transition: all 100ms ease;\n\n  &:hover {\n    background: #eee;\n  }\n\n  &:active {\n    background: #ccc;\n  }\n\n  path {\n    stroke-width: 2px;\n  }\n`);\n\nconst SummaryStroke = styled(SquiggleSvg)<{ color: string; size?: number }>`\n  position: relative;\n  display: inline-block;\n  margin: 2px;\n  padding: 4px;\n  height: 30px;\n  width: 30px;\n  border-radius: 100%;\n  color: ${(props) => props.color};\n  background: transparent;\n  // transform: rotate(192deg);\n  cursor: pointer;\n  transition: all 100ms ease;\n\n  path {\n    fill: ${(props) => props.color}3b;\n  }\n`;\n\nconst ColorOption = styled(SquiggleSvg)<{ color: string; selected: boolean }>`\n  position: relative;\n  display: inline-block;\n  margin: 2px;\n  padding: 4px;\n  height: 30px;\n  width: 30px;\n  border-radius: 100%;\n  color: ${(props) => props.color};\n  background: ${(props) => (props.selected ? \"#ddd\" : \"transparent\")};\n  // transform: rotate(192deg);\n  cursor: pointer;\n  transition: all 100ms ease;\n\n  &:hover {\n    background: ${(props) => (props.selected ? \"#ddd\" : \"#eee\")};\n  }\n\n  &:active {\n    background: #ccc;\n  }\n\n  path {\n    fill: ${(props) => props.color}3b;\n  }\n`;\n\nconst Text = styled.span`\n  display: block;\n  font-size: 13px;\n  font-weight: 500;\n  line-height: 14px;\n`;\n\nconst Button = styled(Text)`\n  padding: 4px 8px;\n  height: 30px;\n  width: 100%;\n  border-radius: 6px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  cursor: pointer;\n  transition: all 100ms ease;\n\n  &:hover {\n    background: #eee;\n  }\n\n  &:active {\n    background: #ccc;\n  }\n`;\n\nconst Group = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`;\n\nconst Section = styled.div`\n  width: 100%;\n  display: flex;\n  flex-direction: row;\n  align-items: flex-start;\n  justify-content: center;\n\n  margin-bottom: 8px;\n`;\n\nconst Label = styled.div`\n  width: 42px;\n  span {\n    margin-top: 10px;\n  }\n`;\n\nconst Options = styled.div`\n  flex: 3;\n  width: 100%;\n  padding-left: 12px;\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: flex-start;\n  align-items: center;\n`;\n\nconst StrokeSize = styled.div<{ color: string; selected: boolean; size: number }>`\n  position: relative;\n  margin: 2px;\n  padding: 4px;\n  height: 30px;\n  width: 40px;\n  border-radius: 6px;\n  background: ${(props) => (props.selected ? \"#ddd\" : \"transparent\")};\n\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  transition: all 100ms ease;\n\n  &:hover {\n    background: ${(props) => (props.selected ? \"#ddd\" : \"#eee\")};\n  }\n\n  &:active {\n    background: #ccc;\n  }\n\n  &:after {\n    content: \"\";\n    width: 90%;\n    height: ${(props) => props.size}px;\n    background: ${(props) => props.color};\n    border-radius: 4px;\n  }\n`;\n","import { useHotkeys } from \"react-hotkeys-hook\";\nimport { app } from \"../state/state\";\nimport { Status } from \"../types/app\";\n\nexport const useKeyboardShortcuts = () => {\n  useHotkeys(\"command+z,ctrl+z\", () => {\n    app.undo();\n  });\n\n  useHotkeys(\"command+shift+z,ctrl+shift+z\", () => {\n    app.redo();\n  });\n\n  useHotkeys(\"escape\", () => {\n    app.setStatus(Status.FREEHAND);\n  });\n\n  useHotkeys(\"d\", () => {\n    app.setStatus(Status.FREEHAND);\n  });\n\n  useHotkeys(\"e\", () => {\n    app.setStatus(Status.ERASE);\n  });\n};\n","import { FC, useEffect } from \"react\";\nimport { Action, actionToString, Status, statusToString } from \"../types/app\";\nimport { Camera, Viewport } from \"../types/canvas\";\nimport { getBox } from \"../utils/canvas\";\n\ntype DebugWindowProps = {\n  camera: Camera;\n  status: Status;\n  action: Action;\n  onReset: () => void;\n  onUndo: () => void;\n  onRedo: () => void;\n  viewport: Viewport;\n};\n\nexport const DebugWindow: FC<DebugWindowProps> = ({\n  camera,\n  status,\n  action,\n  onReset,\n  onUndo,\n  onRedo,\n  viewport,\n}) => {\n  const box = getBox();\n\n  useEffect(() => {\n    document.styleSheets[0].insertRule(\n      `#canvas * { outline: 1px solid #6c6c6c11; }`,\n      0,\n    );\n    return () => document.styleSheets[0].deleteRule(0);\n  });\n\n  return (\n    <div className=\"debug-sticky\">\n      <button\n        style={{ display: \"block\", margin: \"0 0 10px\" }}\n        onClick={onReset}\n      >\n        Reset\n      </button>\n      <button style={{ display: \"block\", margin: \"0 0 10px\" }} onClick={onUndo}>\n        Undo\n      </button>\n      <button style={{ display: \"block\", margin: \"0 0 10px\" }} onClick={onRedo}>\n        Redo\n      </button>\n\n      <h4 style={{ marginBottom: 4 }}>Status</h4>\n      <div>{statusToString(status)}</div>\n\n      <h4 style={{ marginBottom: 4 }}>Action</h4>\n      <div>{actionToString(action)}</div>\n\n      <h4 style={{ marginBottom: 4 }}>Zoom</h4>\n      <div>{Math.floor(camera.z * 100)}%</div>\n\n      <h4 style={{ marginBottom: 4 }}>Camera</h4>\n      <div>x: {Math.floor(camera.x)}</div>\n      <div>y: {Math.floor(camera.y)}</div>\n\n      <h4 style={{ marginBottom: 4 }}>Viewport</h4>\n      <div>minX: {Math.floor(viewport.minX)}</div>\n      <div>minY: {Math.floor(viewport.minY)}</div>\n      <div>maxX: {Math.floor(viewport.maxX)}</div>\n      <div>maxY: {Math.floor(viewport.maxY)}</div>\n      <div>width: {Math.floor(viewport.width)}</div>\n      <div>height: {Math.floor(viewport.height)}</div>\n\n      <h4 style={{ marginBottom: 4 }}>Box</h4>\n      <div>minX: {Math.floor(box.minX)}</div>\n      <div>minY: {Math.floor(box.minY)}</div>\n      <div>maxX: {Math.floor(box.maxX)}</div>\n      <div>maxY: {Math.floor(box.maxY)}</div>\n      <div>width: {Math.floor(box.width)}</div>\n      <div>height: {Math.floor(box.height)}</div>\n    </div>\n  );\n};\n","import { Component } from \"react\";\nimport PropTypes from \"prop-types\";\n\nconst GRAPH_HEIGHT = 29;\nconst GRAPH_WIDTH = 70;\n\nclass FPSStats extends Component {\n  static propTypes = {\n    top: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n    bottom: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n    right: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n    left: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  };\n\n  static defaultProps = {\n    top: 0,\n    left: 0,\n    bottom: \"auto\",\n    right: \"auto\",\n  };\n\n  constructor(props) {\n    super(props);\n    const currentTime = Date.now();\n    this.state = {\n      frames: 0,\n      startTime: currentTime,\n      prevTime: currentTime,\n      fps: [],\n    };\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    return this.state.fps !== nextState.fps || this.props !== nextProps;\n  }\n\n  componentDidMount() {\n    const onRequestAnimationFrame = () => {\n      this.calcFPS();\n      this.afRequest = window.requestAnimationFrame(onRequestAnimationFrame);\n    };\n    this.afRequest = window.requestAnimationFrame(onRequestAnimationFrame);\n  }\n\n  componentWillUnmount() {\n    window.cancelAnimationFrame(this.afRequest);\n  }\n\n  calcFPS() {\n    const currentTime = Date.now();\n    this.setState((state) => ({\n      frames: state.frames + 1,\n    }));\n    if (currentTime > this.state.prevTime + 1000) {\n      const lastFps = Math.round(\n        (this.state.frames * 1000) / (currentTime - this.state.prevTime),\n      );\n      const fps = this.state.fps;\n      fps.push(lastFps);\n      this.setState({\n        fps: fps.slice(-GRAPH_WIDTH),\n        frames: 0,\n        prevTime: currentTime,\n      });\n    }\n  }\n\n  render() {\n    const { top, right, bottom, left } = this.props;\n    const { fps } = this.state;\n    const wrapperStyle = {\n      zIndex: 999999,\n      position: \"fixed\",\n      height: \"46px\",\n      width: GRAPH_WIDTH + 6 + \"px\",\n      padding: \"3px\",\n      backgroundColor: \"#000\",\n      color: \"#00ffff\",\n      fontSize: \"9px\",\n      lineHeight: \"10px\",\n      fontFamily: \"Helvetica, Arial, sans-serif\",\n      fontWeight: \"bold\",\n      MozBoxSizing: \"border-box\",\n      boxSizing: \"border-box\",\n      pointerEvents: \"none\",\n      top,\n      right,\n      bottom,\n      left,\n    };\n    const graphStyle = {\n      position: \"absolute\",\n      left: \"3px\",\n      right: \"3px\",\n      bottom: \"3px\",\n      height: GRAPH_HEIGHT + \"px\",\n      backgroundColor: \"#282844\",\n      MozBoxSizing: \"border-box\",\n      boxSizing: \"border-box\",\n    };\n    const barStyle = (height, i) => ({\n      position: \"absolute\",\n      bottom: \"0\",\n      right: fps.length - 1 - i + \"px\",\n      height: height + \"px\",\n      width: \"1px\",\n      backgroundColor: \"#00ffff\",\n      MozBoxSizing: \"border-box\",\n      boxSizing: \"border-box\",\n    });\n    const maxFps = Math.max.apply(Math.max, fps);\n    return (\n      <div style={wrapperStyle}>\n        <span>{fps[fps.length - 1]} FPS</span>\n        <div style={graphStyle}>\n          {fps.map((fps, i) => {\n            const height = (GRAPH_HEIGHT * fps) / maxFps;\n            return <div key={`fps-${i}`} style={barStyle(height, i)} />;\n          })}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default FPSStats;\n","import { FC } from \"react\";\nimport styled from \"@emotion/styled\";\nimport { app, useAppState } from \"../state/state\";\nimport { Renderer } from \"./Renderer\";\nimport { Controls } from \"./Controls\";\nimport { useKeyboardShortcuts } from \"../hooks/useKeyboardShortcuts\";\nimport { getBox, getViewport } from \"../utils/canvas\";\nimport { DebugWindow } from \"./DebugWindow\";\nimport { AnimationProvider } from \"../contexts/animation\";\nimport { CursorPreviewProvider } from \"../contexts/preview\";\nimport { MouseProvider } from \"../contexts/mouse\";\nimport FPSStats from \"./helpers/FPS\";\nimport { defaultEditorOptions, EditorOptions } from \"../types/app\";\nimport { ActivityProvider } from \"../contexts/activity\";\n\nconst Container = styled.div`\n  position: relative;\n  height: 80vh;\n  min-height: 560px;\n  width: 90%;\n  margin: 24px auto 0;\n  background: #ffffff;\n  box-sizing: border-box;\n  box-shadow: rgba(99, 99, 99, 0.2) 0px 2px 8px 0px;\n  border-radius: 4px;\n  overflow: hidden;\n`;\n\ntype EditorProps = {\n  debug?: boolean;\n  showFPS?: boolean;\n  containerStyle?: React.CSSProperties;\n  svgStyle?: React.CSSProperties;\n  options?: EditorOptions;\n};\n\nexport const Editor: FC<EditorProps> = ({\n  debug = false,\n  showFPS = false,\n  containerStyle = {},\n  svgStyle = {},\n  options = defaultEditorOptions,\n}) => {\n  const {\n    onPan,\n    onPinch,\n    onFreehandStart,\n    onFreehandMove,\n    onFreehandEnd,\n    onEraseStart,\n    onEraseMove,\n    onEraseEnd,\n    setTheme,\n  } = app;\n\n  const { status, action, content, camera, theme, meta } = useAppState();\n  const box = getBox();\n  const viewport = getViewport(camera, box);\n\n  useKeyboardShortcuts();\n\n  return (\n    <Container id=\"canvas\" style={containerStyle}>\n      <ActivityProvider>\n        <MouseProvider>\n          <AnimationProvider>\n            <CursorPreviewProvider>\n              <Renderer\n                status={status}\n                action={action}\n                meta={meta}\n                camera={camera}\n                theme={theme}\n                content={content}\n                onPan={onPan}\n                onPinch={onPinch}\n                onFreehandStart={onFreehandStart}\n                onFreehandMove={onFreehandMove}\n                onFreehandEnd={onFreehandEnd}\n                onEraseStart={onEraseStart}\n                onEraseMove={onEraseMove}\n                onEraseEnd={onEraseEnd}\n                debug={debug}\n                options={options}\n                svgStyle={svgStyle}\n              />\n              <Controls\n                status={status}\n                camera={camera}\n                action={action}\n                meta={meta}\n                theme={theme}\n                setTheme={setTheme}\n              />\n              {showFPS && <FPSStats />}\n              {debug && (\n                <DebugWindow\n                  onReset={app.reset}\n                  onUndo={app.undo}\n                  onRedo={app.redo}\n                  status={status}\n                  action={action}\n                  camera={camera}\n                  viewport={viewport}\n                />\n              )}\n            </CursorPreviewProvider>\n          </AnimationProvider>\n        </MouseProvider>\n      </ActivityProvider>\n    </Container>\n  );\n};\n","import { Component } from \"react\";\nimport styled from \"@emotion/styled\";\nimport { Palette } from \"../constants/color\";\n\nexport class ErrorBoundary extends Component {\n  state = {\n    hasError: false,\n    error: null,\n  } as {\n    hasError: boolean;\n    error: Error | null;\n  };\n\n  static getDerivedStateFromError(error: Error) {\n    return { hasError: true };\n  }\n\n  componentDidCatch(error: Error, errorInfo: any) {\n    this.setState({ error });\n  }\n\n  render() {\n    if (this.state.hasError) {\n      // You can render any custom fallback UI\n      return (\n        <Container>\n          <Title>An error occurred.</Title>\n          <Text>Error: {this.state.error?.message}</Text>\n        </Container>\n      );\n    }\n\n    return this.props.children;\n  }\n}\n\nconst Container = styled.div`\n  position: relative;\n  height: 100vh;\n  width: 100%;\n  margin: 0;\n  background: ${Palette.Black};\n  box-sizing: border-box;\n  box-shadow: rgba(99, 99, 99, 0.2) 0px 2px 8px 0px;\n  border-radius: 0;\n  overflow: hidden;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n`;\n\nconst Text = styled.p`\n  font-size: 13px;\n  font-weight: 500;\n  line-height: 17px;\n  color: #ffffff;\n  margin: 4px auto 8px;\n  text-align: center;\n`;\n\nconst Title = styled(Text)`\n  font-size: 18px;\n  line-height: 19px;\n  margin: 8px auto 12px;\n`;\n","export const isMobile = /Android|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(\n  navigator.userAgent,\n);\n","import { Disabled } from \"./components/Disabled\";\nimport { Editor } from \"./components/Editor\";\nimport { ErrorBoundary } from \"./components/ErrorBoundary\";\nimport { isMobile } from \"./constants/app\";\nimport \"./css/styles.css\";\n\nexport default function Notion() {\n  return (\n    <ErrorBoundary>\n      {isMobile ? (\n        <Disabled />\n      ) : (\n        <Editor\n          svgStyle={{\n            background: \"#fff\",\n          }}\n          containerStyle={{\n            height: \"100vh\",\n            minHeight: \"100vh\",\n            width: \"100%\",\n            borderRadius: 0,\n            margin: 0,\n          }}\n          options={{\n            hideBackgroundPattern: true,\n            disablePanning: false,\n          }}\n          debug={false}\n          showFPS={false}\n        />\n      )}\n    </ErrorBoundary>\n  );\n}\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <Router>\n      <Switch>\n        <Route exact path=\"/\">\n          <App />\n        </Route>\n        <Route path=\"/:id\">\n          <App />\n        </Route>\n      </Switch>\n    </Router>\n  </React.StrictMode>,\n  document.getElementById(\"root\"),\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}